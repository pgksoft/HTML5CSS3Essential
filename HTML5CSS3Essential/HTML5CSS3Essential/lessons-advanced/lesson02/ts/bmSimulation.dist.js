!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([,function(e,t,i){"use strict";var s,n;i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r})),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Reproduce=2]="Reproduce",e[e.Info=3]="Info",e[e.Remove=4]="Remove",e[e.Find=5]="Find",e[e.ClearFind=6]="ClearFind",e[e.SelectLocalFiles=7]="SelectLocalFiles",e[e.IsSelected=8]="IsSelected",e[e.ToState=9]="ToState"}(s||(s={})),function(e){e[e.Disable=0]="Disable",e[e.Enable=1]="Enable"}(n||(n={}));let a=e=>"block"===e.style.display||"block"===window.getComputedStyle(e,null).display||"flex"===e.style.display||"flex"===window.getComputedStyle(e,null).display,r=e=>{(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,300)})(e)};(()=>{class e{constructor(e,t,i,s,n){this._modal=e,this._header=t,this._content=i,this._yes=s,this._no=n}static get instance(){return this._instance}static Create(t,i,s,n,a){e._instance||(this._instance=new e(t,i,s,n,a))}get nameEventDeleteConfirm(){return"modalConfirm-delete-confirm"}get nameEventDeleteRefuse(){return"modalConfirm-delete-refuse"}get nameEventSureConfirm(){return"modalConfirm-sure-confirm"}get nameEventSureRefuse(){return"modalConfirm-sure-refuse"}get nameEventCaution(){return"modalConfirm-caution"}get eventDeleteConfirm(){return new CustomEvent(this.nameEventDeleteConfirm,{bubbles:!0})}get eventDeleteRefuse(){return new CustomEvent(this.nameEventDeleteRefuse,{bubbles:!0})}get eventCaution(){return new CustomEvent(this.nameEventCaution,{bubbles:!0})}OpenConfirmDelete(e,t=null){this._header.innerText="Подтвердите удаление",this._content.innerText=e,this.SetButtonDefault(),t?(this._yes.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventDeleteConfirm,{bubbles:!0,detail:{resolve:t("yes")}}))},this._no.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventDeleteRefuse,{bubbles:!0,detail:{resolve:t("no")}}))}):(this._yes.onclick=()=>{document.dispatchEvent(this.eventDeleteConfirm)},this._no.onclick=()=>{document.dispatchEvent(this.eventDeleteRefuse)}),this._modal.style.display="block"}OpenSure(e){this._header.innerText="Are you sure?",this._content.innerText="Please confirm the action",this.SetButtonDefault(),this._yes.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventSureConfirm,{bubbles:!0,detail:{resolve:e("yes")}}))},this._no.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventSureRefuse,{bubbles:!0,detail:{resolve:e("no")}}))},this._modal.style.display="block"}OpenCaution(e){this._header.innerText="!!! Внимание",this._content.innerText=e,this.SetButtonCaution(),this._yes.onclick=()=>{document.dispatchEvent(this.eventCaution)},this._modal.style.display="block"}SetButtonDefault(){this.ToVisibilityBtn(this._yes),this.ToVisibilityBtn(this._no),this._yes.innerText="Confirm",this._no.innerText="Refuse"}SetButtonCaution(){this.ToVisibilityBtn(this._yes),this.ToUnVisibilityBtn(this._no),this._yes.innerText="OK"}ToVisibilityBtn(e){e.style.position="static",e.style.visibility="visible"}ToUnVisibilityBtn(e){e.style.position="absolute ",e.style.visibility="hidden"}}e._instance=void 0})();(()=>{class e{constructor(e,t,i,s,n){this._name=e,this._typeAction=t,this._state=i,this._action=s,this._context=n}get name(){return this._name}get typeAction(){return this._typeAction}get state(){return this._state}set state(e){this._state=e,document.dispatchEvent(this.eventChangeState)}get isEnabled(){return this.state==n.Enable}get eventChangeState(){return new CustomEvent(e.eventNameChangeState,{bubbles:!0,detail:{command:this}})}Execute(){this.isEnabled&&this._action.call(this._context)}}e.eventNameChangeState="command-change-state"})()},function(e,t,i){"use strict";var s,n;i.r(t),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Reproduce=2]="Reproduce",e[e.Info=3]="Info",e[e.Remove=4]="Remove",e[e.Find=5]="Find",e[e.ClearFind=6]="ClearFind",e[e.SelectLocalFiles=7]="SelectLocalFiles",e[e.IsSelected=8]="IsSelected",e[e.ToState=9]="ToState"}(s||(s={})),function(e){e[e.Disable=0]="Disable",e[e.Enable=1]="Enable"}(n||(n={}));let a=e=>"block"===e.style.display||"block"===window.getComputedStyle(e,null).display||"flex"===e.style.display||"flex"===window.getComputedStyle(e,null).display;class r{constructor(e,t,i,s,n){this._modal=e,this._header=t,this._content=i,this._yes=s,this._no=n}static get instance(){return this._instance}static Create(e,t,i,s,n){r._instance||(this._instance=new r(e,t,i,s,n))}get nameEventDeleteConfirm(){return"modalConfirm-delete-confirm"}get nameEventDeleteRefuse(){return"modalConfirm-delete-refuse"}get nameEventSureConfirm(){return"modalConfirm-sure-confirm"}get nameEventSureRefuse(){return"modalConfirm-sure-refuse"}get nameEventCaution(){return"modalConfirm-caution"}get eventDeleteConfirm(){return new CustomEvent(this.nameEventDeleteConfirm,{bubbles:!0})}get eventDeleteRefuse(){return new CustomEvent(this.nameEventDeleteRefuse,{bubbles:!0})}get eventCaution(){return new CustomEvent(this.nameEventCaution,{bubbles:!0})}OpenConfirmDelete(e,t=null){this._header.innerText="Подтвердите удаление",this._content.innerText=e,this.SetButtonDefault(),t?(this._yes.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventDeleteConfirm,{bubbles:!0,detail:{resolve:t("yes")}}))},this._no.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventDeleteRefuse,{bubbles:!0,detail:{resolve:t("no")}}))}):(this._yes.onclick=()=>{document.dispatchEvent(this.eventDeleteConfirm)},this._no.onclick=()=>{document.dispatchEvent(this.eventDeleteRefuse)}),this._modal.style.display="block"}OpenSure(e){this._header.innerText="Are you sure?",this._content.innerText="Please confirm the action",this.SetButtonDefault(),this._yes.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventSureConfirm,{bubbles:!0,detail:{resolve:e("yes")}}))},this._no.onclick=()=>{document.dispatchEvent(new CustomEvent(this.nameEventSureRefuse,{bubbles:!0,detail:{resolve:e("no")}}))},this._modal.style.display="block"}OpenCaution(e){this._header.innerText="!!! Внимание",this._content.innerText=e,this.SetButtonCaution(),this._yes.onclick=()=>{document.dispatchEvent(this.eventCaution)},this._modal.style.display="block"}SetButtonDefault(){this.ToVisibilityBtn(this._yes),this.ToVisibilityBtn(this._no),this._yes.innerText="Confirm",this._no.innerText="Refuse"}SetButtonCaution(){this.ToVisibilityBtn(this._yes),this.ToUnVisibilityBtn(this._no),this._yes.innerText="OK"}ToVisibilityBtn(e){e.style.position="static",e.style.visibility="visible"}ToUnVisibilityBtn(e){e.style.position="absolute ",e.style.visibility="hidden"}}r._instance=void 0;class o{constructor(e,t,i,s,n){this._name=e,this._typeAction=t,this._state=i,this._action=s,this._context=n}get name(){return this._name}get typeAction(){return this._typeAction}get state(){return this._state}set state(e){this._state=e,document.dispatchEvent(this.eventChangeState)}get isEnabled(){return this.state==n.Enable}get eventChangeState(){return new CustomEvent(o.eventNameChangeState,{bubbles:!0,detail:{command:this}})}Execute(){this.isEnabled&&this._action.call(this._context)}}o.eventNameChangeState="command-change-state";let l=()=>"undefined"!=typeof OffscreenCanvas,h=e=>e.transferControlToOffscreen();var d=i(1);const m=new Map([["Любая",0],["Один",1],["Два",2],["Три",3],["Четыре",4],["Пять",5]]),c=new Map([["Любая",0],["Квадрат",1],["Круг",2]]),u=new Map([["Любая",0],["Цветная",1],["Начальный градиент",2],["Перерисовка градиента",3]]),_=new Map([["300 x 150",300],["600 x 300",600],["900 x 450",900],["1200 x 600",1200],["1600 x 800",1600],["1900 x 950",1900],["2560 x 1280",2560],["3200 x 1600",3200],["4800 x 2400",4800],["5600 x 2800",5600]]);class f{constructor(){this.app="BrownianMotionSimulation"}}class p{}class g{constructor(){this._speed=Array.from(m.entries()).find(e=>"Один"===e[0]),this._amount=50,this._kind=c.entries().next().value,this._size=30,this._path=[50,200],this._fill=u.entries().next().value,this._scale=_.entries().next().value,this._isOffScreenCanvas=!1,this._isTrackProportionsAreaMotion=!0,this._isTranslucentModal=!1}get speed(){return this._speed}get amount(){return this._amount}get kind(){return this._kind}get size(){return this._size}get path(){return this._path}get fill(){return this._fill}get scale(){return this._scale}get isOffScreenCanvas(){return this._isOffScreenCanvas}get isTrackProportionsAreaMotion(){return this._isTrackProportionsAreaMotion}get isTranslucentModal(){return this._isTranslucentModal}}class v{constructor(){this._default=new g,this._speed=this._default.speed,this._amount=this._default.amount,this._kind=this._default.kind,this._size=this._default.size,this._path=this._default.path,this._fill=this._default.fill,this._scale=this._default.scale,this._isTrackProportionsAreaMotion=this._default.isTrackProportionsAreaMotion,this._isOffScreenCanvas=this._default.isOffScreenCanvas,this._isTranslucentModal=this._default.isTranslucentModal,this._localKey=new f,this._localParms=new p,this._nameEventAmountChange="bmAmountChange",this._nameEventSpeedChange="bmSpeedChange",this._nameEventSizeChange="bmSizeChange",this._nameEventKindChange="bmKindChange",this._nameEventFillChange="bmFillChange",this._nameEventPathChange="bmPathChange",this._nameEventScaleChange="bmScaleChange",this._nameEventIsOffScreenCanvas="bmClick-IsOffScreenCanvas",this._nameEventIsTrackProportionsAreaMotion="bmClick-IsTrackProportionsAreaMotion",this._nameEventIsTranslucent="bmClick-IsTranslucentModal",this._localParms.amount=this._amount,this._localParms.fill=this._fill,this._localParms.kind=this._kind,this._localParms.path=this._path,this._localParms.size=this._size,this._localParms.speed=this._speed,this._localParms.scale=this._scale,this._localParms.isOffScreenCanvas=this._isOffScreenCanvas,this._localParms.isTrackProportionsAreaMotion=this._isTrackProportionsAreaMotion,this._localParms.isTranslucentModal=this._isTranslucentModal,this.Load()}static get instance(){return v._instance||(v._instance=new v),v._instance}get default(){return this._default}get speed(){return this._speed}set speed(e){this._speed=e,this._localParms.speed=this.speed,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventSpeedChange,{bubbles:!0,detail:{value:e}}))}get amount(){return this._amount}set amount(e){this._amount=e,this._localParms.amount=this.amount,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventAmountChange,{bubbles:!0,detail:{value:e}}))}get kind(){return this._kind}set kind(e){this._kind=e,this._localParms.kind=this.kind,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventKindChange,{bubbles:!0,detail:{value:e}}))}get size(){return this._size}set size(e){this._size=e,this._localParms.size=this.size,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventSizeChange,{bubbles:!0,detail:{value:e}}))}get path(){return this._path}set path(e){this._path=e,this._localParms.path=this.path,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventPathChange,{bubbles:!0,detail:{value:e}}))}get fill(){return this._fill}set fill(e){this._fill=e,this._localParms.fill=this.fill,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventFillChange,{bubbles:!0,detail:{value:e}}))}get scale(){return this._scale}set scale(e){this._scale=e,this._localParms.scale=this.scale,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventScaleChange,{bubbles:!0,detail:{value:e}}))}get isOffScreenCanvas(){return this._isOffScreenCanvas}set isOffScreenCanvas(e){this._isOffScreenCanvas=e,this._localParms.isOffScreenCanvas=this.isOffScreenCanvas,this.Save(),document.dispatchEvent(new CustomEvent(this._nameEventIsOffScreenCanvas,{bubbles:!0,detail:{value:e}}))}get isTrackProportionsAreaMotion(){return this._isTrackProportionsAreaMotion}set isTrackProportionsAreaMotion(e){this._isTrackProportionsAreaMotion=e,this._localParms.isTrackProportionsAreaMotion=this.isTrackProportionsAreaMotion,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventIsTrackProportionsAreaMotion,{bubbles:!0,detail:{value:e}}))}get isTranslucentModal(){return this._isTranslucentModal}set isTranslucentModal(e){this._isTranslucentModal=e,this._localParms.isTranslucentModal=this.isTranslucentModal,this.Save(),document.dispatchEvent(new CustomEvent(this.nameEventIsTranslucent,{bubbles:!0,detail:{value:e}}))}get nameEventAmountChange(){return this._nameEventAmountChange}get nameEventSpeedChange(){return this._nameEventSpeedChange}get nameEventSizeChange(){return this._nameEventSizeChange}get nameEventKindChange(){return this._nameEventKindChange}get nameEventFillChange(){return this._nameEventFillChange}get nameEventPathChange(){return this._nameEventPathChange}get nameEventScaleChange(){return this._nameEventScaleChange}get nameEventIsOffScreenCanvas(){return this._nameEventIsOffScreenCanvas}get nameEventIsTrackProportionsAreaMotion(){return this._nameEventIsTrackProportionsAreaMotion}get nameEventIsTranslucent(){return this._nameEventIsTranslucent}Save(){localStorage.setItem(JSON.stringify(this._localKey),JSON.stringify(this._localParms))}Load(){localStorage.getItem(JSON.stringify(this._localKey))&&(this._localParms=JSON.parse(localStorage.getItem(JSON.stringify(this._localKey))),this._amount=this._localParms.amount,this._fill=this._localParms.fill,this._kind=this._localParms.kind,this._path=this._localParms.path,this._size=this._localParms.size,this._speed=this._localParms.speed,this._scale=this._localParms.scale,this._isOffScreenCanvas=this._localParms.isOffScreenCanvas,this._isTrackProportionsAreaMotion=this._localParms.isTrackProportionsAreaMotion,this._isTranslucentModal=this._localParms.isTranslucentModal)}}v._instance=void 0;class S{constructor(e,t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,v,S,P){this._params=e,this._showParms=t,this._modalParms=i,this._modalParmsSpeedPanel=s,this._modalParmsShowAmountValue=n,this._modalParmsAmount=a,this._modalParmsElementKindPanel=r,this._modalParmsFillTypePanel=o,this._modalParmsShowSizeValue=l,this._modalParmsSize=h,this._modalParmsShowPathFromValue=d,this._modalParmsPathFrom=m,this._modalParmsShowPathToValue=c,this._modalParmsPathTo=u,this._modalParmsScaleArea=_,this._modalParmsIsOffScreenCanvas=f,this._modalParmsIsTrackProportionsAreaMotion=p,this._modalParmsIsTranslucentModal=g,this._modalParmsSetDefault=v,this._modalParmsOK=S,this._menuSelect=P,this.CreateItemsOfSpeedPanel(this._modalParmsSpeedPanel),this.InitAmount(),this.CreateItemsOfElenetKindPanel(this._modalParmsElementKindPanel),this.CreateItemsOfFillTypePanel(this._modalParmsFillTypePanel),this.CreateItemsOfScaleAreaPanel(this._modalParmsScaleArea),this.InitSize(),this.InitPath(),this.InitIsOffscreenCanvas(),this.DefineEvents(),this.Show()}static Create(e,t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,v,P,C){return S._instance||(S._instance=new S(e,t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,v,P,C)),S._instance}Open(){for(let e of document.getElementsByName("speed"))this._params.speed[1]==Number(e.dataset.speed)&&(e.checked=!0);for(let e of document.getElementsByName("kind"))this._params.kind[1]==Number(e.dataset.kind)&&(e.checked=!0);for(let e of document.getElementsByName("fill"))this._params.fill[1]==Number(e.dataset.fill)&&(e.checked=!0);for(let e of document.getElementsByName("scale"))this._params.scale[1]==Number(e.dataset.scale)&&(e.checked=!0);this._modalParmsOK.onclick=()=>{this._modalParms.style.display="none"},this._modalParms.style.display="block"}CreateItemsOfSpeedPanel(e,t=!1){let i,s;for(let n of m.entries())i=document.createElement("input"),i.type="radio",i.name=t?"menu-speed":"speed",i.id=t?"menu-speed-"+n[1]:"speed-"+n[1],i.dataset.speed=""+n[1],s=document.createElement("label"),s.htmlFor=i.id,s.innerText=n[0],n[1]==this._params.speed[1]&&(i.checked=!0),t&&(i.onclick=e=>{let t=e.target;this._params.speed=Array.from(m.entries()).find(e=>e[1]===Number(t.dataset.speed)),this.Show(),this._menuSelect.style.display="none"}),e.appendChild(i),e.appendChild(s)}InitAmount(){this._modalParmsAmount.min=1..toString(),this._modalParmsAmount.max=1e5.toString(),this._modalParmsAmount.addEventListener("change",()=>{this._params.amount=Number(this._modalParmsAmount.value),this.Show()},!1),this._modalParmsAmount.addEventListener("input",()=>{this._modalParmsShowAmountValue.innerText=this._modalParmsAmount.value},!1),this._modalParmsAmount.value=this._params.amount.toString(),this._modalParmsShowAmountValue.innerText=this._modalParmsAmount.value}CreateItemsOfElenetKindPanel(e,t=!1){let i,s;for(let n of c.entries())i=document.createElement("input"),i.type="radio",i.name=t?"menu-kind":"kind",i.id=t?"menu-kind-"+n[1]:"kind-"+n[1],i.dataset.kind=""+n[1],s=document.createElement("label"),s.htmlFor=i.id,s.innerText=n[0],n[1]==this._params.kind[1]&&(i.checked=!0),t&&(i.onclick=e=>{let t=e.target;this._params.kind=Array.from(c.entries()).find(e=>e[1]===Number(t.dataset.kind)),this.Show(),this._menuSelect.style.display="none"}),e.appendChild(i),e.appendChild(s)}CreateItemsOfFillTypePanel(e,t=!1){let i,s;for(let n of u.entries())i=document.createElement("input"),i.type="radio",i.name=t?"menu-fill":"fill",i.id=t?"menu-fill-"+n[1]:"fill-"+n[1],i.dataset.fill=""+n[1],s=document.createElement("label"),s.htmlFor=i.id,s.innerText=n[0],n[1]==this._params.fill[1]&&(i.checked=!0),t&&(i.onclick=e=>{let t=e.target;this._params.fill=Array.from(u.entries()).find(e=>e[1]===Number(t.dataset.fill)),this.Show(),this._menuSelect.style.display="none"}),e.appendChild(i),e.appendChild(s),this._params.isOffScreenCanvas&&"Начальный градиент"===n[0]&&(i.disabled=!0)}CreateItemsOfScaleAreaPanel(e,t=!1){let i,s;for(let n of _.entries())i=document.createElement("input"),i.type="radio",i.name=t?"menu-scale":"scale",i.id=t?"menu-scale-"+n[1]:"scale-"+n[1],i.dataset.scale=""+n[1],s=document.createElement("label"),s.htmlFor=i.id,s.innerText=n[0],n[1]==this._params.scale[1]&&(i.checked=!0),t&&(i.onclick=e=>{let t=e.target;this._params.scale=Array.from(_.entries()).find(e=>e[1]===Number(t.dataset.scale)),this.Show(),this._menuSelect.style.display="none"}),e.appendChild(i),e.appendChild(s)}InitSize(){this._modalParmsSize.min=10..toString(),this._modalParmsSize.max=50..toString(),this._modalParmsSize.addEventListener("change",()=>{this._params.size=Number(this._modalParmsSize.value),this.Show()},!1),this._modalParmsSize.addEventListener("input",()=>{this._modalParmsShowSizeValue.innerText=this._modalParmsSize.value},!1),this._modalParmsSize.value=this._params.size.toString(),this._modalParmsShowSizeValue.innerText=this._modalParmsSize.value}InitPath(){this._modalParmsPathFrom.min=1..toString(),this._modalParmsPathFrom.max=300..toString(),this._modalParmsPathFrom.addEventListener("change",()=>{this._params.path=[Number(this._modalParmsPathFrom.value),this._params.path[1]],this.Show()},!1),this._modalParmsPathFrom.addEventListener("input",()=>{this.PathConsistency(0),this._modalParmsShowPathFromValue.innerText=this._modalParmsPathFrom.value},!1),this._modalParmsPathFrom.value=this._params.path[0].toString(),this._modalParmsShowPathFromValue.innerText=this._modalParmsPathFrom.value,this._modalParmsPathTo.min=1..toString(),this._modalParmsPathTo.max=300..toString(),this._modalParmsPathTo.addEventListener("change",()=>{this._params.path=[this._params.path[0],Number(this._modalParmsPathTo.value)],this.Show()},!1),this._modalParmsPathTo.addEventListener("input",()=>{this.PathConsistency(1),this._modalParmsShowPathToValue.innerText=this._modalParmsPathTo.value},!1),this._modalParmsPathTo.value=this._params.path[1].toString(),this._modalParmsShowPathToValue.innerText=this._modalParmsPathTo.value}InitIsOffscreenCanvas(){this._modalParmsIsOffScreenCanvas.checked=this._params.isOffScreenCanvas}PathConsistency(e,t){Number(this._modalParmsPathFrom.value)>Number(this._modalParmsPathTo.value)&&(0==e?(this._modalParmsPathFrom.value=this._modalParmsPathTo.value,this._modalParmsShowPathFromValue.innerText=this._modalParmsPathFrom.value,t&&(t.value=this._modalParmsPathTo.value)):1==e&&(this._modalParmsPathTo.value=this._modalParmsPathFrom.value,this._modalParmsShowPathToValue.innerText=this._modalParmsPathTo.value,t&&(t.value=this._modalParmsPathFrom.value)))}DefineEvents(){for(let e of document.getElementsByName("speed"))e.addEventListener("click",()=>{this._params.speed=Array.from(m.entries()).find(t=>t[1]===Number(e.dataset.speed)),this.Show()},!1);for(let e of document.getElementsByName("kind"))e.addEventListener("click",()=>{this._params.kind=Array.from(c.entries()).find(t=>t[1]===Number(e.dataset.kind)),this.Show()},!1);for(let e of document.getElementsByName("fill"))e.addEventListener("click",()=>{this._params.fill=Array.from(u.entries()).find(t=>t[1]===Number(e.dataset.fill)),this.Show()},!1);for(let e of document.getElementsByName("scale"))e.addEventListener("click",()=>{this._params.scale=Array.from(_.entries()).find(t=>t[1]===Number(e.dataset.scale)),this.Show()},!1);this._modalParmsIsOffScreenCanvas.addEventListener("click",()=>{this._params.isOffScreenCanvas=this._modalParmsIsOffScreenCanvas.checked},!1),this._modalParmsIsTranslucentModal.addEventListener("click",()=>{this._params.isTranslucentModal=this._modalParmsIsTranslucentModal.checked},!1),this._modalParmsIsTrackProportionsAreaMotion.addEventListener("click",()=>{this._params.isTrackProportionsAreaMotion=this._modalParmsIsTrackProportionsAreaMotion.checked},!1),this._modalParmsSetDefault.addEventListener("click",()=>{this.SetDefault()},!1),window.addEventListener("resize",()=>{this.OnWindowChange()},!1),window.addEventListener("scroll",()=>{this.OnWindowChange()},!1)}DefineEventsContenteditable(){for(let e of document.querySelectorAll("[contenteditable]"))e.oninput=e=>{this.RangeContenteditableValidate(e)},e.onblur=e=>{this.SetRangeContenteditable(e)},e.onkeydown=e=>{this.RangeEnter(e)}}DefineEventsParamSelect(){for(let e of document.querySelectorAll("[data-menu]"))e.onclick=e=>{this.OnParamMenuClick(e)}}DefineEventsRange(){for(let e of document.querySelectorAll("[data-range]"))e.onclick=e=>{this.OnParamRangeClick(e)}}OnParamRangeClick(e){let t=e.target;if(Object(d.a)(this._menuSelect)&&this._menuSelect.dataset.type===t.dataset.range)return this._menuSelect.dataset.type="empty",void(this._menuSelect.style.display="none");this._menuSelect.dataset.type=t.dataset.range,this._menuSelect.innerHTML="";let i=t.getBoundingClientRect();switch(this._menuSelect.style.left=i.left+5+"px",this._menuSelect.style.top=i.bottom+"px",this._menuSelect.className="pop-up-range",t.dataset.range){case"amount":this.CreatePopUpRange(t.dataset.range,this._params.amount,[Number(this._modalParmsAmount.min),Number(this._modalParmsAmount.max)]);break;case"size":this.CreatePopUpRange(t.dataset.range,this._params.size,[Number(this._modalParmsSize.min),Number(this._modalParmsSize.max)]);break;case"path-from":this.CreatePopUpRange(t.dataset.range,this._params.path[0],[Number(this._modalParmsPathFrom.min),Number(this._modalParmsPathFrom.max)]);break;case"path-to":this.CreatePopUpRange(t.dataset.range,this._params.path[1],[Number(this._modalParmsPathTo.min),Number(this._modalParmsPathTo.max)]);break;default:this._menuSelect.innerHTML=`<p>${t.dataset.range}</p>`}this._menuSelect.style.display="flex"}CreatePopUpRange(e,t,i){let s=document.createElement("div");s.innerHTML=`${i[0]}/${i[1]}`;let n=document.createElement("div");n.className="range-wrapper";let a=document.createElement("input");a.type="range",a.dataset.popUpRange=e,a.addEventListener("change",e=>{this.OnPopUpRangeChange(e)},!1),a.addEventListener("input",e=>{this.OnPopUpRangeChange(e)},!1),a.min=i[0].toString(),a.max=i[1].toString(),a.value=t.toString(),n.appendChild(a),this._menuSelect.appendChild(s),this._menuSelect.appendChild(n)}OnPopUpRangeChange(e){let t=e.target;switch(t.dataset.popUpRange){case"amount":this._modalParmsAmount.value=t.value,this._modalParmsAmount.dispatchEvent(new Event("input")),this._modalParmsAmount.dispatchEvent(new Event("change"));break;case"size":this._modalParmsSize.value=t.value,this._modalParmsSize.dispatchEvent(new Event("input")),this._modalParmsSize.dispatchEvent(new Event("change"));break;case"path-from":this._modalParmsPathFrom.value=t.value,this.PathConsistency(0,t),this._modalParmsPathFrom.dispatchEvent(new Event("input")),this._modalParmsPathFrom.dispatchEvent(new Event("change"));break;case"path-to":this._modalParmsPathTo.value=t.value,this.PathConsistency(1,t),this._modalParmsPathTo.dispatchEvent(new Event("input")),this._modalParmsPathTo.dispatchEvent(new Event("change"))}this.Show()}InitRangesTitle(){for(let e of document.querySelectorAll("[contenteditable]")){switch(e.dataset.name){case"amount":e.title=`${this._modalParmsAmount.min}/${this._modalParmsAmount.max}`;break;case"size":e.title=`${this._modalParmsSize.min}/${this._modalParmsSize.max}`;break;case"path-from":e.title=`${this._modalParmsPathFrom.min}/${this._modalParmsPathFrom.max}`;break;case"path-to":e.title=`${this._modalParmsPathTo.min}/${this._modalParmsPathTo.max}`}}}Show(){this._showParms.innerHTML="";let e=document.createElement("p");e.innerHTML=`<span data-range="amount">Количество:</span>&nbsp;<span contenteditable="true" data-name="amount" data-validate="true">${this._params.amount}</span>&nbsp;&nbsp; Скорость:&nbsp<span data-menu="speed">${this._params.speed[0]}</span>&nbsp;&nbsp; <span data-range="size">Размер:</span>&nbsp<span contenteditable="true" data-name="size" data-validate="true">${this._params.size}</span>&nbsp;&nbsp; Вид&nbspфигуры:&nbsp<span data-menu="kind">${this._params.kind[0]}</span>&nbsp;&nbsp; Тип&nbspзаливки:&nbsp<span data-menu="fill">${this._params.fill[0]}</span>&nbsp;&nbsp; Длина&nbspпути:&nbsp<span data-range="path-from">от</span>&nbsp<span contenteditable="true" data-name="path-from" data-validate="true">${this._params.path[0]}</span>&nbsp<span data-range="path-to">до</span>&nbsp<span contenteditable="true" data-name="path-to" data-validate="true">${this._params.path[1]}</span >&nbsp;&nbsp; Масштабность:&nbsp;<span data-menu="scale">${this._params.scale[0]}</span>`,this._showParms.appendChild(e),this.DefineEventsContenteditable(),this.DefineEventsParamSelect(),this.DefineEventsRange(),this.InitRangesTitle()}SetDefault(){for(let e of document.getElementsByName("speed"))Number(e.dataset.speed)==this._params.default.speed[1]&&(e.checked=!0,e.click());this._modalParmsAmount.value=this._params.default.amount.toString(),this._modalParmsAmount.dispatchEvent(new Event("input")),this._modalParmsAmount.dispatchEvent(new Event("change"));for(let e of document.getElementsByName("kind"))Number(e.dataset.kind)==this._params.default.kind[1]&&(e.checked=!0,e.click());for(let e of document.getElementsByName("fill"))Number(e.dataset.fill)==this._params.default.fill[1]&&(e.checked=!0,e.click());for(let e of document.getElementsByName("scale"))Number(e.dataset.scale)==this._params.default.scale[1]&&(e.checked=!0,e.click());this._modalParmsSize.value=this._params.default.size.toString(),this._modalParmsSize.dispatchEvent(new Event("input")),this._modalParmsSize.dispatchEvent(new Event("change")),this._modalParmsPathFrom.value=this._params.default.path[0].toString(),this._modalParmsPathTo.value=this._params.default.path[1].toString(),this._modalParmsPathFrom.dispatchEvent(new Event("input")),this._modalParmsPathTo.dispatchEvent(new Event("input")),this._modalParmsPathFrom.dispatchEvent(new Event("change")),this._modalParmsPathTo.dispatchEvent(new Event("change"))}RangeContenteditableValidate(e){let t=e.target;/^0+/.test(t.innerText)&&(t.innerText=t.innerText.replace(/^0+/,"")),/\n/g.test(t.innerText)&&(t.innerText=t.innerText.replace(/\n/g,"")),t.dataset.validate=this.IsRangeContenteditableValidate(t.innerText,t.dataset.name).toString()}RangeEnter(e){if(13==e.keyCode){let t=e.target;this.IsRangeContenteditableValidate(t.innerText,t.dataset.name)&&!this.IsEqualNewOld(Number(t.innerText),t.dataset.name)?t.blur():this.IsRangeContenteditableValidate(t.innerText,t.dataset.name)||this.SetCorrectRange(t.innerText,t.dataset.name)}}SetRangeContenteditable(e){let t=e.target;if(this.IsRangeContenteditableValidate(t.innerText,t.dataset.name)&&!this.IsEqualNewOld(Number(t.innerText),t.dataset.name))switch(t.dataset.name){case"size":this._modalParmsSize.value=t.innerText,this._modalParmsSize.dispatchEvent(new Event("input")),this._modalParmsSize.dispatchEvent(new Event("change"));break;case"amount":this._modalParmsAmount.value=t.innerText,this._modalParmsAmount.dispatchEvent(new Event("input")),this._modalParmsAmount.dispatchEvent(new Event("change"));break;case"path-from":this._modalParmsPathFrom.value=t.innerText,this._modalParmsPathFrom.dispatchEvent(new Event("input")),this._modalParmsPathFrom.dispatchEvent(new Event("change"));break;case"path-to":this._modalParmsPathTo.value=t.innerText,this._modalParmsPathTo.dispatchEvent(new Event("input")),this._modalParmsPathTo.dispatchEvent(new Event("change"))}else this._modalParmsSize.dispatchEvent(new Event("input")),this._modalParmsAmount.dispatchEvent(new Event("input")),this._modalParmsPathFrom.dispatchEvent(new Event("input")),this._modalParmsPathTo.dispatchEvent(new Event("input"))}IsRangeContenteditableValidate(e,t){let i=!1;if(/^[0-9]+$/.test(e)){i=!0;let s=Number(e);switch(t){case"size":(s<10||s>50)&&(i=!1);break;case"amount":(s<1||s>1e5)&&(i=!1);break;case"path-from":(s<1||s>300||s>this._params.path[1])&&(i=!1);break;case"path-to":(s<1||s>300||s<this._params.path[0])&&(i=!1)}}return i}SetCorrectRange(e,t){Number(e);switch(t){case"size":e=this._modalParmsSize.value;break;case"amount":e=this._modalParmsAmount.value;break;case"path-from":e=this._modalParmsPathFrom.value;break;case"path-to":e=this._modalParmsPathTo.value}}IsEqualNewOld(e,t){let i=!1;switch(t){case"size":e==this._params.size&&(i=!0);break;case"amount":e==this._params.amount&&(i=!0);break;case"path-from":e==this._params.path[0]&&(i=!0);break;case"path-to":e==this._params.path[1]&&(i=!0)}return i}OnParamMenuClick(e){let t=e.target;if(Object(d.a)(this._menuSelect)&&this._menuSelect.dataset.type===t.dataset.menu)return this._menuSelect.dataset.type="empty",void(this._menuSelect.style.display="none");this._menuSelect.dataset.type=t.dataset.menu,this._menuSelect.innerHTML="";let i=t.getBoundingClientRect();switch(this._menuSelect.style.left=i.left+5+"px",this._menuSelect.style.top=i.bottom+"px",t.dataset.menu){case"speed":this.CreateItemsOfSpeedPanel(this._menuSelect,!0);break;case"kind":this.CreateItemsOfElenetKindPanel(this._menuSelect,!0);break;case"fill":this.CreateItemsOfFillTypePanel(this._menuSelect,!0);break;case"scale":this.CreateItemsOfScaleAreaPanel(this._menuSelect,!0);break;default:this._menuSelect.innerHTML=`<p>${t.dataset.menu}</p>`}this._menuSelect.className="overflow-auto add-conditions",this._menuSelect.style.display="flex"}OnWindowChange(){this.SetEmptyMenuSelect()}SetEmptyMenuSelect(){this._menuSelect.dataset.type="empty",this._menuSelect.style.display="none"}}S._instance=void 0;var P,C;!function(e){e[e.LeftToRight=1]="LeftToRight",e[e.TopToBottom=2]="TopToBottom",e[e.LeftTopToBottomRight=3]="LeftTopToBottomRight",e[e.RightTopToLeftBottom=4]="RightTopToLeftBottom"}(P||(P={})),function(e){e[e.Centre=1]="Centre",e[e.LeftRight=2]="LeftRight",e[e.RightLeft=3]="RightLeft",e[e.TopBottom=4]="TopBottom",e[e.BottomTop=5]="BottomTop"}(C||(C={}));class y{constructor(){this.colorScheme=new b}GetGradientProperties(){this.direction=w.instance.gradientDirection,this.colorScheme=new b;let e,t,i=w.instance.RandomInt(5,15);for(let s=0;s<i;s++)e=s/i,t=w.instance.randomColor,this.colorScheme.Add([e,t]);return e=1,t=w.instance.randomColor,this.colorScheme.Add([e,t]),this}}class b{constructor(){this._scheme=[]}get list(){return this._scheme}Add(e){this._scheme.push(e)}Clear(){this._scheme.length=0}}class E{constructor(e,t,i,s,n,a){this._oneX=0,this._oneY=0,this._oneR=0,this._twoX=0,this._twoY=0,this._twoR=0,this._oneX=e,this._oneY=t,this._oneR=i,this._twoX=s,this._twoY=n,this._twoR=a}get oneX(){return this._oneX}set oneX(e){this._oneX=e}get oneY(){return this._oneY}set oneY(e){this._oneY=e}get oneR(){return this._oneR}set oneR(e){this._oneR=e}get twoX(){return this._twoX}set twoX(e){this._twoX=e}get twoY(){return this._twoY}set twoY(e){this._twoY=e}get twoR(){return this._twoR}set twoR(e){this._twoR=e}}class w{constructor(){this._mapColors=new Map([["Aliceblue","#f0f8ff"],["Antiquewhite","#FAEBD7"],["Aqua","#00FFFF"],["Aquamarine","#7FFFD4"],["Azure","#F0FFFF"],["Beige","#F5F5DC"],["Bisque","#FFE4C4"],["Black","#000000"],["Blanchedalmond","#FFEBCD"],["Blue","#0000ff"],["Blueviolet","#8A2BE2"],["Brown","#A52A2A"],["Burlywood","#DEB887"],["Cadetblue","#5F9EA0"],["Chartreuse","#7FFF00"],["Chocolate","#D2691E"],["Coral","#FF7F50"],["Cornflowerblue","#6495ED"],["Cornsilk","#FFF8DC"],["Crimson","#DC143C"],["Cyan","#00FFFF"],["Darkblue","#00008B"],["Darkcyan","#008B8B"],["Darkgoldenrod","#B8860B"],["Darkgray","#A9A9A9"],["Darkgreen","#006400"],["Darkkhaki","#BDB76B"],["Darkmagenta","#8B008B"],["Darkolivegreen","#556B2F"],["Darkorange","#FF8C00"],["Darkorchid","#9932CC"],["Darkred","#8B0000"],["Darksalmon","#E9967A"],["Darkseagreen","#8FBC8B"],["Darkslateblue","#483D8B"],["Darkslategray","#2F4F4F"],["Darkturquoise","#00CED1"],["Darkviolet","#9400D3"],["Deeppink","#FF1493"],["Deepskyblue","#00BFFF"],["Dimgray","#696969"],["Dodgerblue","#1E90FF"],["Firebrick","#B22222"],["Floralwhite","#FFFAF0"],["Forestgreen","#228B22"],["Fuchsia","#FF00FF"],["Gainsboro","#DCDCDC"],["Ghostwhite","#F8F8FF"],["Gold","#FFD700"],["Goldenrod","#DAA520"],["Gray","#808080"],["Green","#008000"],["Greenyellow","#ADFF2F"],["Honeydew","#F0FFF0"],["Hotpink","#FF69B4"],["Indianred","#CD5C5C"],["Indigo","#4B0082"],["Ivory","#FFFFF0"],["Khaki","#F0E68C"],["Lavender","#E6E6FA"],["Lavenderblush","#FFF0F5"],["Lawngreen","#7CFC00"],["Lemonchiffon","#FFFACD"],["Lightblue","#ADD8E6"],["Lightcoral","#F08080"],["Lightcyan","#E0FFFF"],["Lightgoldenrod","#EEDD82"],["Lightgoldenrodyellow","#FAFAD2"],["Lightgray","#D3D3D3"],["Lightgreen","#90EE90"],["Lightpink","#FFB6C1"],["Lightsalmon","#FFA07A"],["Lightseagreen","#20B2AA"],["Lightskyblue","#87CEFA"],["Lightslateblue","#8470FF"],["Lightslategray","#778899"],["Lightsteelblue","#B0C4DE"],["Lightyellow","#FFFFE0"],["Lime","#00FF00"],["Limegreen","#32CD32"],["Linen","#FAF0E6"],["Magenta","#FF00FF"],["Maroon","#800000"],["Mediumaquamarine","#66CDAA"],["Mediumblue","#0000CD"],["Mediumorchid","#BA55D3"],["Mediumpurple","#9370DB"],["Mediumseagreen","#3CB371"],["Mediumslateblue","#7B68EE"],["Mediumspringgreen","#00FA9A"],["Mediumturquoise","#48D1CC"],["Mediumvioletred","#C71585"],["Midnightblue","#191970"],["Mintcream","#F5FFFA"],["Mistyrose","#FFE4E1"],["Moccasin","#FFE4B5"],["Navajowhite","#FFDEAD"],["Navy","#000080"],["Navyblue","#A0B0E0"],["Oldlace","#FDF5E6"],["Olive","#808000"],["Olivedrab","#6B8E23"],["Orange","#FFA500"],["Orangered","#FF4500"],["Orchid","#DA70D6"],["Palegoldenrod","#EEE8AA"],["Palegreen","#98FB98"],["Paleturquoise","#AFEEEE"],["Palevioletred","#DB7093"],["Papayawhip","#FFEFD5"],["Peachpuff","#FFDAB9"],["Peru","#CD853F"],["Pink","#FFC0CB"],["Plum","#DDA0DD"],["Powderblue","#B0E0E6"],["Purple","#800080"],["Red","#FF0000"],["Rosybrown","#BC8F8F"],["Royalblue","#4169E1"],["Saddlebrown","#8B4513"],["Salmon","#FA8072"],["Sandybrown","#F4A460"],["Seagreen","#2E8B57"],["Seashell","#FFF5EE"],["Sienna","#A0522D"],["Silver","#C0C0C0"],["Skyblue","#87CEEB"],["Slateblue","#6A5ACD"],["Slategray","#708090"],["Snow","#FFFAFA"],["Springgreen","#00FF7F"],["Steelblue","#4682B4"],["Tan","#D2B48C"],["Teal","#008080"],["Thistle","#D8BFD8"],["Tomato","#FF6347"],["Turquoise","#40E0D0"],["Violet","#EE82EE"],["Violetred","#D02090"],["Wheat","#F5DEB3"],["White","#FFFFFF"],["Whitesmoke","#F5F5F5"],["Yellow","#FFFF00"],["Yellowgreen","#9ACD32"]]),this._minLayersGradient=5,this._maxLayersGradient=15}static get instance(){return w._instance||(this._instance=new w),this._instance}get mapColors(){return this._mapColors}get randomColor(){let e,t=this.RandomInt(1,this._mapColors.size),i=0;for(let s of this._mapColors.keys())if(i++,i===t){e=this._mapColors.get(s);break}return e}get minLayersGradient(){return this._minLayersGradient}set minLayersGradient(e){this._minLayersGradient=e}get maxLayersGradient(){return this._maxLayersGradient}set maxLayersGradient(e){this._maxLayersGradient=e}get gradientDirection(){return this.RandomInt(1,4)}CreateColorScheme(e=[]){let t=new b;if(0==e.length){let e,i,s=this.RandomInt(this.minLayersGradient,this.maxLayersGradient);for(let n=0;n<s;n++)e=n/s,i=w.instance.randomColor,t.Add([e,i]);e=1,i=w.instance.randomColor,t.Add([e,i])}else e.forEach(e=>{t.Add(e)});return t}FillSchemeColor(e,t=null){t||(t=this.randomColor),e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=t,e.fill()}FillSchemeLineGradient(e,t){e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=this.RestoreFillRectLineGradient(e,0,0,e.canvas.width,e.canvas.height,t),e.fill()}FillSchemeRadialGradient(e,t){e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=this.GetFillRectRadialGradient(e,this.GetRadialParams(0,0,e.canvas.width,e.canvas.height,t.radialDirection),t.colorScheme),e.fill()}FillLineGradient(e,t){let i;i=this.GetLinerGradient(t,e,0,0,e.canvas.width,e.canvas.height),this.GetLinerGradientColorScheme(i),e.fillStyle=i,e.fillRect(0,0,e.canvas.width,e.canvas.height)}FillRectRadialGradiant(e,t,i,s,n,a,r,o,l,h,d,m){let c=e.createRadialGradient(a,r,o,l,h,d);m.list.forEach(e=>{c.addColorStop(e[0],e[1])}),e.fillStyle=c,e.fillRect(t,i,s,n)}GetFillRectRadialGradient(e,t,i){let s=e.createRadialGradient(t.oneX,t.oneY,t.oneR,t.twoX,t.twoY,t.twoR);return i.list.forEach(e=>{s.addColorStop(e[0],e[1])}),s}GetRadialParams(e,t,i,s,n){let a=new E(0,0,0,0,0,0);switch(n){case C.Centre:a.oneR=Math.ceil(Math.min(i,s)/30),a.oneX=Math.ceil(e+i/2),a.oneY=Math.ceil(t+s/2),a.twoR=Math.ceil(.9*Math.min(i,s)),a.twoX=Math.ceil(e+i/2),a.twoY=Math.ceil(t+s/2);break;case C.LeftRight:a.oneR=Math.ceil(s/2),a.oneX=Math.ceil(e+2*a.oneR/3),a.oneY=Math.ceil(t+s/2),a.twoR=a.oneR,a.twoX=Math.ceil(e+i+a.twoR),a.twoY=Math.ceil(t+s/2);break;case C.RightLeft:a.oneR=Math.ceil(s/2),a.oneX=Math.ceil(e+i-2*a.oneR/3),a.oneY=Math.ceil(t+s/2),a.twoR=a.oneR,a.twoX=Math.ceil(e-a.twoR),a.twoY=Math.ceil(t+s/2);break;case C.TopBottom:a.oneR=Math.ceil(i/2),a.oneX=Math.ceil(e+i/2),a.oneY=Math.ceil(t+2*a.oneR/3),a.twoR=a.oneR,a.twoX=Math.ceil(e+i/2),a.twoY=Math.ceil(t+s+a.oneR);break;case C.BottomTop:a.oneR=Math.ceil(i/2),a.oneX=Math.ceil(e+i/2),a.oneY=Math.ceil(t+s-2*a.oneR/3),a.twoR=a.oneR,a.twoX=Math.ceil(e+i/2),a.twoY=Math.ceil(t-a.oneR)}return a}GetFillBoxLineGradient(e,t,i,s,n){let a;return n.direction=this.gradientDirection,a=this.GetLinerGradient(n.direction,e,t,i,s,s),n.colorScheme=this.GetLinerGradientColorScheme(a),a}GetFillRectLineGradient(e,t,i,s,n,a){let r;return a.direction=this.gradientDirection,r=this.GetLinerGradient(a.direction,e,t,i,s,n),a.colorScheme=this.GetLinerGradientColorScheme(r),r}RestoreFillBoxLineGradient(e,t,i,s,n){let a;a=this.GetLinerGradient(n.direction,e,t,i,s,s);for(let e of n.colorScheme.list)a.addColorStop(e[0],e[1]);return a}RestoreFillRectLineGradient(e,t,i,s,n,a){let r;r=this.GetLinerGradient(a.direction,e,t,i,s,n);for(let e of a.colorScheme.list)r.addColorStop(e[0],e[1]);return r}RandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}GetLinerGradient(e,t,i,s,n,a){return e===P.LeftToRight?t.createLinearGradient(i,s,i+n,s):e===P.TopToBottom?t.createLinearGradient(i,s,i,s+a):e===P.LeftTopToBottomRight?t.createLinearGradient(i,s,i+a,s+n):e===P.RightTopToLeftBottom?t.createLinearGradient(i,s+n,i+a,s):t.createLinearGradient(i,s,i,s+a)}GetLinerGradientColorScheme(e){let t,i,s=new b,n=this.RandomInt(this.minLayersGradient,this.maxLayersGradient);for(let a=0;a<n;a++)t=a/n,i=this.randomColor,s.Add([t,i]),e.addColorStop(t,i);return t=1,i=this.randomColor,s.Add([t,i]),e.addColorStop(t,i),s}}w._instance=void 0;class A{constructor(e){this._ordinal=0,this._startX=0,this._startY=0,this._x=0,this._y=0,this._size=30,this._borderWidth=5,this._angleAlfa=1,this._speed=1,this._countSteps=0,this._lengthPath=0,this._step=0,this._fillType=u.entries().next().value,this._isGradientDefined=null,this._gradientPropertiesInside=new y,this._gradientPropertiesBorder=new y,this._isInitLog=!1,this._kind=e}get kind(){return this._kind}get ordinal(){return this._ordinal}set ordinal(e){this._ordinal=e}get startX(){return this._startX}set startX(e){this._startX=e}get startY(){return this._startY}set startY(e){this._startY=e}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}get size(){return this._size}set size(e){this._size=e}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=e}get angleAlfa(){return this._angleAlfa}set angleAlfa(e){this._angleAlfa=e}get speed(){return this._speed}set speed(e){this._speed=e}get countSteps(){return this._countSteps}set countSteps(e){this._countSteps=e}get lengthPath(){return this._lengthPath}set lengthPath(e){this._lengthPath=e}get step(){return this._step}set step(e){this._step=e}get fillType(){return this._fillType}set fillType(e){this._fillType=e}get colorInside(){return this._colorInside}set colorInside(e){this._colorInside=e}get colorBorder(){return this._colorBorder}set colorBorder(e){this._colorBorder=e}get isGradientDefined(){return this._isGradientDefined}set isGradientDefined(e){this._isGradientDefined=e}get gradientInside(){return this._gradientInside}set gradientInside(e){this._gradientInside=e}get gradientBorder(){return this._gradientBorder}set gradientBorder(e){this._gradientBorder=e}get gradientPropertiesInside(){return this._gradientPropertiesInside}set gradientPropertiesInside(e){this._gradientPropertiesInside=e}get gradientPropertiesBorder(){return this._gradientPropertiesBorder}set gradientPropertiesBorder(e){this._gradientPropertiesBorder=e}get isInitLog(){return this._isInitLog}set isInitLog(e){this._isInitLog=e}Draw(e){}toString(){return this.isInitLog?this.toLog():this.toInitLog()}toInitLog(){return this.isInitLog=!0,`</br>${this.ordinal}: lengthPath=${this.lengthPath}`+this.toLog()}toLog(){return`</br>${this.ordinal}: step=${this.step}, X=${this.x}, Y=${this.y}, countSteps=${this.countSteps}, statrtX=${this.startX}, startY=${this.startY},  angleAlfa=${this.angleAlfa}`}}class F extends A{constructor(){super(Array.from(c.entries()).find(e=>"Квадрат"===e[0]))}Draw(e){e.beginPath(),e.rect(this.x,this.y,this.size,this.size),"Цветная"===this.fillType[0]?e.fillStyle=this.colorBorder:"Начальный градиент"!==this.fillType[0]&&"Перерисовка градиента"!==this.fillType[0]||("Перерисовка градиента"===this.fillType[0]&&(this.gradientBorder=w.instance.RestoreFillBoxLineGradient(e,this.x,this.y,this.size,this.gradientPropertiesBorder)),e.fillStyle=this.gradientBorder),e.fill(),e.beginPath(),e.rect(this.x+this.borderWidth,this.y+this.borderWidth,this.size-2*this.borderWidth,this.size-2*this.borderWidth),"Цветная"===this.fillType[0]?e.fillStyle=this.colorInside:"Начальный градиент"!==this.fillType[0]&&"Перерисовка градиента"!==this.fillType[0]||("Перерисовка градиента"===this.fillType[0]&&(this.gradientInside=w.instance.RestoreFillBoxLineGradient(e,this.x+this.borderWidth,this.y+this.borderWidth,this.size-2*this.borderWidth,this.gradientPropertiesInside)),e.fillStyle=this.gradientInside),e.fill()}}class T extends A{constructor(){super(Array.from(c.entries()).find(e=>"Круг"===e[0]))}Draw(e){e.beginPath();let t=this.size/2,i=2*Math.PI;e.arc(this.x+t,this.y+t,t,0,i,!1),"Цветная"===this.fillType[0]?e.fillStyle=this.colorBorder:"Начальный градиент"!==this.fillType[0]&&"Перерисовка градиента"!==this.fillType[0]||("Перерисовка градиента"==this.fillType[0]&&(this.gradientBorder=w.instance.RestoreFillBoxLineGradient(e,this.x,this.y,this.size,this.gradientPropertiesBorder)),e.fillStyle=this.gradientBorder),e.fill(),e.beginPath(),e.arc(this.x+t,this.y+t,t-this.borderWidth,0,i,!1),"Цветная"===this.fillType[0]?e.fillStyle=this.colorInside:"Начальный градиент"!==this.fillType[0]&&"Перерисовка градиента"!==this.fillType[0]||("Перерисовка градиента"===this.fillType[0]&&(this.gradientInside=w.instance.RestoreFillBoxLineGradient(e,this.x+this.borderWidth,this.y+this.borderWidth,this.size-2*this.borderWidth,this.gradientPropertiesInside)),e.fillStyle=this.gradientInside),e.fill()}}class B{constructor(e){if(this._bmAreaBuffer=document.createElement("canvas"),this._figures=new Set,this._isAnimate=!1,this._isStepByStep=!1,this._log=document.getElementById("log"),this._aSincAreaBuffer=document.createElement("canvas"),this._stateOffscreenCanvasAnimate=0,this._brownianMotionArea=e,l()&&v.instance.isOffScreenCanvas?this._bmAsyncCanvas=new Worker("ts/view/bmAsyncCanvas.dist.js"):this._context=this._brownianMotionArea.getContext("2d"),this._log.innerHTML="",this.SetSizeBrownianMotionBuffer(),this._buffer=this._bmAreaBuffer.getContext("2d"),this.DefineEvents(),this.InitScaleArea(),l()&&v.instance.isOffScreenCanvas){this._bmOffScreenCanvas=h(this._brownianMotionArea),this._aSincCanvasBuffer=h(this._aSincAreaBuffer),this._bmOffScreenCanvas.width=this.GetScale(1),this._bmOffScreenCanvas.height=this.GetScale(2),this._aSincCanvasBuffer.width=this.GetScale(1),this._aSincCanvasBuffer.height=this.GetScale(2);let e=this._bmOffScreenCanvas;this._bmAsyncCanvas.postMessage({offScreenCanvas:e},[e]);let t=this._aSincCanvasBuffer;this._bmAsyncCanvas.postMessage({offCanvasBuffer:t},[t])}this.Init()}get speed(){let e=v.instance.speed[1];return e==Array.from(m.entries()).find(e=>"Любая"===e[0])[1]&&(e=w.instance.RandomInt(1,m.size-1)),e}get lengthPath(){return w.instance.RandomInt(v.instance.path[0],v.instance.path[1])}get fillType(){let e=v.instance.fill;if("Любая"===e[0]){let t=w.instance.RandomInt(1,u.size-1);e=Array.from(u.entries()).find(e=>e[1]==t)}return e}get angleAlfa(){return w.instance.RandomInt(0,359)}static Create(e){return B._instance||(B._instance=new B(e)),B._instance}Redraw(){this._isAnimate||v.instance.isOffScreenCanvas||this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height),this._figures.clear(),this.Init()}SetSizeBrownianMotionBuffer(){this._bmAreaBuffer.width=this._brownianMotionArea.width,this._bmAreaBuffer.height=this._brownianMotionArea.height}DefineEvents(){window.addEventListener("resize",()=>{this.SetSizeBrownianMotionBuffer()},!1),document.addEventListener("step-by-step-brownian-motion",()=>{this.OnStepByStepBrownianMotion()},!1),document.addEventListener("change-status-brownian-motion",e=>{this.OnChangeStatusBrownianMotion(e)},!1),document.addEventListener(v.instance.nameEventAmountChange,()=>{this.OnAmountChange()},!1),document.addEventListener(v.instance.nameEventFillChange,()=>{this.OnFillChange()},!1),document.addEventListener(v.instance.nameEventKindChange,()=>{this.OnKindChange()},!1),document.addEventListener(v.instance.nameEventPathChange,()=>{this.OnPathChange()},!1),document.addEventListener(v.instance.nameEventSizeChange,()=>{this.OnSizeChange()},!1),document.addEventListener(v.instance.nameEventSpeedChange,()=>{this.OnSpeedChange()},!1),document.addEventListener(v.instance.nameEventScaleChange,()=>{this.OnScaleChange()},!1),document.addEventListener(v.instance.nameEventIsOffScreenCanvas,()=>{this.OnIsOffscreenCanvas()},!1),l()&&v.instance.isOffScreenCanvas&&(this._bmAsyncCanvas.onmessage=({data:{step:e}})=>{this.OnMessageBmAsyncCanvas({step:e})})}GetFigure(){let e,t=v.instance.kind[0];if("Любая"===t){let e=w.instance.RandomInt(1,c.size-1);t=Array.from(c.entries()).find(t=>t[1]==e)[0]}return"Квадрат"===t?e=new F:"Круг"===t&&(e=new T),e}InitFigure(e){if(e.size=v.instance.size,e.borderWidth=Math.floor(e.size/6),e.startX=w.instance.RandomInt(0,this.GetScale(1)-e.size),e.startY=w.instance.RandomInt(0,this.GetScale(2)-e.size),e.x=e.startX,e.y=e.startY,e.fillType=this.fillType,"Цветная"===e.fillType[0])e.colorBorder=w.instance.randomColor,e.colorInside=w.instance.randomColor;else if("Начальный градиент"===e.fillType[0]||"Перерисовка градиента"===e.fillType[0]){let t;if(v.instance.isOffScreenCanvas){e.isGradientDefined=!1;let t=new y;e.gradientPropertiesBorder=t.GetGradientProperties(),t=new y,e.gradientPropertiesInside=t.GetGradientProperties()}else t=this._isAnimate?this._buffer:this._context,e.gradientBorder=w.instance.GetFillBoxLineGradient(t,e.x,e.y,e.size,e.gradientPropertiesBorder),e.gradientInside=w.instance.GetFillBoxLineGradient(t,e.x+e.borderWidth,e.y+e.borderWidth,e.size-2*e.borderWidth,e.gradientPropertiesInside)}return e.angleAlfa=this.angleAlfa,e.speed=this.speed,e.lengthPath=this.lengthPath,e.ordinal=this._figures.size+1,e.step=0,e.countSteps=Math.round(this.lengthPath/this.speed),e}Init(){for(let e=0;e<v.instance.amount;e++)this._figures.add(this.InitFigure(this.GetFigure()));if(v.instance.isOffScreenCanvas)l()&&v.instance.isOffScreenCanvas&&(this._isAnimate||this.ShowAsyncCanvas());else for(let e of this._figures)e.Draw(this._context)}InitScaleArea(){v.instance.isOffScreenCanvas||(this._brownianMotionArea.width=v.instance.scale[1],this._brownianMotionArea.height=Math.round(this._brownianMotionArea.width/2),this.SetSizeBrownianMotionBuffer())}OnStepByStepBrownianMotion(){this._isAnimate&&(this._isAnimate=!1),this._isStepByStep=!0,this.Animate()}OnChangeStatusBrownianMotion(e){this._isAnimate=e.detail.value,this._isAnimate&&(this._isStepByStep=!1,v.instance.isOffScreenCanvas&&(this._stateOffscreenCanvasAnimate=0),this.Animate())}OnAmountChange(){if(1==v.instance.amount&&(this._log.innerHTML=""),v.instance.amount<this._figures.size){let e=this._figures.size-v.instance.amount;for(let t of this._figures)if(this._figures.delete(t),e--,0===e)break;if(!this._isAnimate)if(v.instance.isOffScreenCanvas)this.ShowAsyncCanvas();else{this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height);for(let e of this._figures)e.Draw(this._context)}}else if(v.instance.amount>this._figures.size){let e=v.instance.amount-this._figures.size;if(v.instance.isOffScreenCanvas){for(let t=0;t<e;t++){let e=this.InitFigure(this.GetFigure());this._figures.add(e)}this._isAnimate||this.ShowAsyncCanvas()}else for(let t=0;t<e;t++){let e=this.InitFigure(this.GetFigure());this._figures.add(e),this._isAnimate||e.Draw(this._context)}}}OnFillChange(){for(let e of this._figures){if(e.fillType=this.fillType,"Цветная"===e.fillType[0])e.colorBorder=w.instance.randomColor,e.colorInside=w.instance.randomColor;else if("Начальный градиент"===e.fillType[0]||"Перерисовка градиента"===e.fillType[0])if(v.instance.isOffScreenCanvas){e.isGradientDefined=!1;let t=new y;e.gradientPropertiesBorder=t.GetGradientProperties(),t=new y,e.gradientPropertiesInside=t.GetGradientProperties()}else{let t;t=this._isAnimate?this._buffer:this._context,e.gradientBorder=w.instance.GetFillBoxLineGradient(t,e.x,e.y,e.size,e.gradientPropertiesBorder),e.gradientInside=w.instance.GetFillBoxLineGradient(t,e.x+e.borderWidth,e.y+e.borderWidth,e.size-2*e.borderWidth,e.gradientPropertiesInside)}v.instance.isOffScreenCanvas||this._isAnimate||e.Draw(this._context)}v.instance.isOffScreenCanvas&&(this._isAnimate||this.ShowAsyncCanvas())}OnKindChange(){if(this._figures.clear(),v.instance.isOffScreenCanvas){for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e)}this._isAnimate||this.ShowAsyncCanvas()}else{this._isAnimate||this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height);for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e),this._isAnimate||e.Draw(this._context)}}}OnPathChange(){for(let e of this._figures)e.lengthPath=this.lengthPath,e.countSteps=Math.round(this.lengthPath/this.speed)}OnSizeChange(){if(this._figures.clear(),v.instance.isOffScreenCanvas){for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e)}this._isAnimate||this.ShowAsyncCanvas()}else{this._isAnimate||this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height);for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e),this._isAnimate||e.Draw(this._context)}}}OnSpeedChange(){for(let e of this._figures)e.speed=this.speed,e.countSteps=Math.round(this.lengthPath/this.speed)}OnScaleChange(){if(this.InitScaleArea(),this._figures.clear(),v.instance.isOffScreenCanvas){for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e)}this._isAnimate||this.ShowAsyncCanvas()}else{this._isAnimate||this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height);for(let e=0;e<v.instance.amount;e++){let e=this.InitFigure(this.GetFigure());this._figures.add(e),this._isAnimate||e.Draw(this._context)}}}OnIsOffscreenCanvas(){document.location.reload()}CalcMotion(e,t,i){let s=!1;if(e.step++,e.step<e.countSteps){let n,a=e.step*e.speed,r=0,o=0;0==e.angleAlfa?(r=a,e.startX+r<t-e.size?e.x=e.startX+r:s=!0):e.angleAlfa>0&&e.angleAlfa<90?(n=e.angleAlfa,o=Math.round(a*Math.sin(this.DegreesToRadians(n))),r=Math.round(a*Math.cos(this.DegreesToRadians(n))),e.startX+r<t-e.size&&e.startY-o>=0?(e.x=e.startX+r,e.y=e.startY-o):s=!0):90==e.angleAlfa?(o=a,e.startY-o>=0?e.y=e.startY-o:s=!0):e.angleAlfa>90&&e.angleAlfa<180?(n=e.angleAlfa-90,r=Math.round(a*Math.sin(this.DegreesToRadians(n))),o=Math.round(a*Math.cos(this.DegreesToRadians(n))),e.startX-r>=0&&e.startY-o>=0?(e.x=e.startX-r,e.y=e.startY-o):s=!0):180==e.angleAlfa?(r=a,e.startX-r>=0?e.x=e.startX-r:s=!0):e.angleAlfa>180&&e.angleAlfa<270?(n=e.angleAlfa-180,o=Math.round(a*Math.sin(this.DegreesToRadians(n))),r=Math.round(a*Math.cos(this.DegreesToRadians(n))),e.startX-r>=0&&e.startY+o<i-e.size?(e.x=e.startX-r,e.y=e.startY+o):s=!0):270==e.angleAlfa?(o=a,e.startY+o<i-e.size?e.y=e.startY+o:s=!0):e.angleAlfa>270&&e.angleAlfa<360&&(n=e.angleAlfa-270,r=Math.round(a*Math.sin(this.DegreesToRadians(n))),o=Math.round(a*Math.cos(this.DegreesToRadians(n))),e.startX+r<t-e.size&&e.startY+o<i-e.size?(e.x=e.startX+r,e.y=e.startY+o):s=!0)}else s=!0;return s}Animate(){if(v.instance.isOffScreenCanvas||this._buffer.clearRect(0,0,this._bmAreaBuffer.width,this._bmAreaBuffer.height),!v.instance.isOffScreenCanvas||v.instance.isOffScreenCanvas&&(0===this._stateOffscreenCanvasAnimate||3===this._stateOffscreenCanvasAnimate)){v.instance.isOffScreenCanvas&&(this._stateOffscreenCanvasAnimate=1);for(let e of this._figures){if(this.CalcMotion(e,this.GetScale(1),this.GetScale(2))){if(e.startX=e.x,e.startY=e.y,e.startX<0&&(e.startX=0),e.startX>this.GetScale(1)-e.size&&(e.startX=this.GetScale(1)-e.size),e.startY<0&&(e.startY=0),e.startY>this.GetScale(2)-e.size&&(e.startY=this.GetScale(2)-e.size),e.fillType=this.fillType,"Цветная"===e.fillType[0])e.colorBorder=w.instance.randomColor,e.colorInside=w.instance.randomColor;else if("Начальный градиент"===e.fillType[0]||"Перерисовка градиента"===e.fillType[0])if(v.instance.isOffScreenCanvas){"Начальный градиент"===e.fillType[0]&&(e.isGradientDefined=!1),e.isGradientDefined=!1;let t=new y;e.gradientPropertiesBorder=t.GetGradientProperties(),t=new y,e.gradientPropertiesInside=t.GetGradientProperties()}else{let t;t=this._isAnimate?this._buffer:this._context,e.gradientBorder=w.instance.GetFillBoxLineGradient(t,e.x,e.y,e.size,e.gradientPropertiesBorder),e.gradientInside=w.instance.GetFillBoxLineGradient(t,e.x+e.borderWidth,e.y+e.borderWidth,e.size-2*e.borderWidth,e.gradientPropertiesInside)}e.angleAlfa=this.angleAlfa,e.speed=this.speed,e.lengthPath=this.lengthPath,e.step=0,e.countSteps=Math.round(this.lengthPath/this.speed),e.isInitLog=!1}this._isStepByStep&&(this._log.innerHTML=`<span ${e.isInitLog?"":'class="accent"'}>${e.toString()}</span>`+this._log.innerHTML),v.instance.isOffScreenCanvas||e.Draw(this._buffer)}v.instance.isOffScreenCanvas||(this._context.clearRect(0,0,this._brownianMotionArea.width,this._brownianMotionArea.height),this._context.drawImage(this._bmAreaBuffer,0,0))}v.instance.isOffScreenCanvas&&1===this._stateOffscreenCanvasAnimate&&(this._stateOffscreenCanvasAnimate=2,this.ShowAsyncCanvas()),this._isAnimate&&this.requestFrame(()=>this.Animate())}requestFrame(e){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,300)})(e)}DegreesToRadians(e){return e*Math.PI/180}OnMessageBmAsyncCanvas({step:e}){"ItWasAnimated"===e&&2===this._stateOffscreenCanvasAnimate&&(this._stateOffscreenCanvasAnimate=3)}GetScale(e){return 1===e?v.instance.scale[1]:2===e?Math.round(v.instance.scale[1]/2):void 0}ShowAsyncCanvas(){let e=this._figures,t=this.GetScale(1),i=this.GetScale(2);this._bmAsyncCanvas.postMessage({figures:e,width:t,height:i})}}B._instance=void 0;(()=>{class e{constructor(e,t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,S,P,C,y,b,E,w,A,F,T,B,k,I,M){this._isMotion=!1,this._launchStop="Стоп",this._launchStart="Старт",this._aspectRatio=1.5,this._parms=v.instance,this._isUseOffscreenCanvas=e,this._settings=t,this._redraw=i,this._stepByStep=s,this._launch=n,this._boxForAreaOfMotion=a,this._brownianMotionArea=r,this._modalConfirm=o,this._modalConfirmYes=l,this._modalConfirmNo=h,this._confirmHeader=d,this._confirmAbout=m,this._showParms=c,this._modalParms=u,this._modalParmsSpeedPanel=_,this._modalParmsShowAmountValue=f,this._modalParmsAmount=p,this._modalParmsElementKindPanel=g,this._modalParmsFillTypePanel=S,this._modalParmsShowSizeValue=P,this._modalParmsSize=C,this._modalParmsShowPathFromValue=y,this._modalParmsPathFrom=b,this._modalParmsShowPathToValue=E,this._modalParmsPathTo=w,this._modalParmsScaleArea=A,this._modalParmsIsOffscreenCanvas=F,this._modalParmsIsTrackProportionsAreaMotion=T,this._modalParmsIsTranslucentModal=B,this._modalParmsSetDefault=k,this._modalParmsOK=I,this._menuSelect=M,this._aspectRatio=this._boxForAreaOfMotion.clientWidth/this._boxForAreaOfMotion.clientHeight,this.DependencyResolutions(),this.SetEvents(),this.EnambelLog(),this.IsDefinedOffScreenCanvas()}static get instance(){if(!e._instance)throw new Error("Instance of Simulation was not created.");return e._instance}static Create(t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,v,S,P,C,y,b,E,w,A,F,T,B,k,I,M){return e._instance||(e._instance=new e(t,i,s,n,a,r,o,l,h,d,m,c,u,_,f,p,g,v,S,P,C,y,b,E,w,A,F,T,B,k,I,M)),e._instance}DependencyResolutions(){r.Create(this._modalConfirm,this._confirmHeader,this._confirmAbout,this._modalConfirmYes,this._modalConfirmNo),this._parmsDefinition=S.Create(this._parms,this._showParms,this._modalParms,this._modalParmsSpeedPanel,this._modalParmsShowAmountValue,this._modalParmsAmount,this._modalParmsElementKindPanel,this._modalParmsFillTypePanel,this._modalParmsShowSizeValue,this._modalParmsSize,this._modalParmsShowPathFromValue,this._modalParmsPathFrom,this._modalParmsShowPathToValue,this._modalParmsPathTo,this._modalParmsScaleArea,this._modalParmsIsOffscreenCanvas,this._modalParmsIsTrackProportionsAreaMotion,this._modalParmsIsTranslucentModal,this._modalParmsSetDefault,this._modalParmsOK,this._menuSelect),this._bmView=B.Create(this._brownianMotionArea)}SetEvents(){window.addEventListener("resize",()=>{this.OnWindowResize()},!1),document.body.addEventListener("keydown",e=>{this.ListeningToKeystrokes(e)},!1),this._settings.addEventListener("click",()=>{this.DefineSettings()},!1),this._redraw.addEventListener("click",()=>{this._bmView.Redraw()},!1),this._stepByStep.addEventListener("click",()=>{document.dispatchEvent(new CustomEvent("step-by-step-brownian-motion",{bubbles:!0}))},!1),this._launch.addEventListener("click",()=>{this.SwitchStatusLaunch()},!1),document.addEventListener(this._parms.nameEventIsTranslucent,e=>{this.OnIsTranslucentModal(e)},!1),document.addEventListener(this._parms.nameEventAmountChange,()=>{this.EnambelLog()},!1),document.addEventListener(this._parms.nameEventIsOffScreenCanvas,()=>{this.OnIsOffscreenCanvas()},!1),this._menuSelect.addEventListener("mouseleave",()=>{a(this._menuSelect)&&(this._menuSelect.style.display="none")},!1)}DefineSettings(){this._parmsDefinition.Open()}SwitchStatusLaunch(){this._isMotion?(this._launch.innerHTML=`<span>${this._launchStart}</span>`,this._launch.dataset.simulation="isStop"):(this._launch.innerHTML=`<span>${this._launchStop}</span>`,this._launch.dataset.simulation="isMotion"),this._isMotion=!this._isMotion,document.dispatchEvent(new CustomEvent("change-status-brownian-motion",{bubbles:!0,detail:{value:this._isMotion}}))}OnWindowResize(){this._parms.isTrackProportionsAreaMotion&&(this._boxForAreaOfMotion.style.height=Math.floor(this._boxForAreaOfMotion.clientWidth/this._aspectRatio)+"px")}ListeningToKeystrokes(e){if(0===e.charCode)switch(e.keyCode){case 27:for(let e of document.getElementsByClassName("w3-modal"))a(e)&&(e.style.display="none");a(this._menuSelect)&&(this._menuSelect.style.display="none")}}OnIsTranslucentModal(e){e.detail.value?this._modalParms.style.opacity="0.7":this._modalParms.style.opacity="1"}EnambelLog(){if(1==v.instance.amount){for(let e of document.getElementsByName("log"))e.style.setProperty("--isLog","block"),e.dataset.display="true";for(let e of document.getElementsByName("log-flex"))e.style.setProperty("--isLogFlex","flex")}else{for(let e of document.getElementsByName("log"))e.style.setProperty("--isLog","none"),e.dataset.display="false";for(let e of document.getElementsByName("log-flex"))e.style.setProperty("--isLogFlex","none")}}IsDefinedOffScreenCanvas(e=!0){var t;return l()?(t=!0,this._isUseOffscreenCanvas.dataset.use="yes",this._modalParmsIsOffscreenCanvas.labels[0].title="OffScreenCanvas is defined",this._isUseOffscreenCanvas.title="OffScreenCanvas is defined",this.OnIsOffscreenCanvas()):(t=!1,this._modalParmsIsOffscreenCanvas.setAttribute("disabled","true"),this._modalParmsIsOffscreenCanvas.labels[0].title="OffScreenCanvas is undefined",this._isUseOffscreenCanvas.dataset.use="no",this._isUseOffscreenCanvas.title="OffScreenCanvas is undefined"),t}OnIsOffscreenCanvas(){this._parms.isOffScreenCanvas?this._isUseOffscreenCanvas.dataset.use="switch-on":this._isUseOffscreenCanvas.dataset.use="yes"}}return e._instance=void 0,e})().Create(document.getElementById("is-use-off-screen-canvas"),document.getElementById("settings"),document.getElementById("redraw"),document.getElementById("step-by-step"),document.getElementById("launch"),document.getElementById("box-for-area-of-motion"),document.getElementById("brownian-motion-area"),document.getElementById("confirm-modal"),document.getElementById("confirmYes"),document.getElementById("confirmNo"),document.getElementById("confirm-modal-Header"),document.getElementById("confirmAbout"),document.getElementById("parms-show"),document.getElementById("parms-modal"),document.getElementById("parms-speed-panel"),document.getElementById("show-amount-value"),document.getElementById("parms-amount"),document.getElementById("parms-element-kind-panel"),document.getElementById("parms-fill-type-panel"),document.getElementById("show-size-value"),document.getElementById("parms-size"),document.getElementById("show-path-from-value"),document.getElementById("parms-path-from"),document.getElementById("show-path-to-value"),document.getElementById("parms-path-to"),document.getElementById("parms-scale-area-panel"),document.getElementById("is-off-screen-canvas"),document.getElementById("is-track-proportions-area-motion"),document.getElementById("is-translucent-modal"),document.getElementById("set-default-parms"),document.getElementById("parmsOK"),document.getElementById("menu-select"))}]);