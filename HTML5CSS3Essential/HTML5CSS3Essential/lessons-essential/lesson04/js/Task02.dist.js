!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([,function(t,e){class n{constructor(){this.kind={point:0,figure:1,rectangle:2,circle:3,flag:4}}static getName(t){switch(t){case(new n).kind.point:return"point";case(new n).kind.figure:return"figure";case(new n).kind.rectangle:return"rectangle";case(new n).kind.circle:return"circle";case(new n).kind.flag:return"flag";default:return"undefined kind figure"}}}class a{constructor(t,e){this.x=t,this.y=e,this.isAnimate=!1,this.wasAnimate=!1,this.serialNumber=0,this.kind=(new n).kind.point,this.isSelected=!1,this.canvas,this.bufferCanvas,this.contextData,this.contextKind}toString(){return`${this.serialNumber}. ${n.getName(this.kind)} ${Math.round(this.x)}x${Math.round(this.y)}.`}getCoords(t){let e,i;return e=t.pageX-v("canvas").offsetLeft,i=t.pageY-v("canvas").offsetTop,{x:e,y:i}}}class s extends a{constructor(t,e,i){super(t,e),this.widthOriginal=i,this.width=this.widthOriginal,this.kind=(new n).kind.figure}toString(){return`${this.serialNumber}. ${n.getName(this.kind)} ${Math.round(this.x)}x${Math.round(this.y)}/w${Math.round(this.width)}.`}restoreWidth(){this.width=this.widthOriginal}drawFigureStar(t,e,i,n,a=3,s="red",r="yellow"){this.drawStar(t,this.x,this.y,e,i,n,a,s,r)}static drawStar(t,e,i,n,a,s,r=3,o="blue",h="skyblue"){let l=Math.PI/2*3,d=e,u=i,c=Math.PI/n;t.strokeSyle="#000",t.beginPath(),t.moveTo(e,i-a);for(let r=0;r<n;r++)d=e+Math.cos(l)*a,u=i+Math.sin(l)*a,t.lineTo(d,u),l+=c,d=e+Math.cos(l)*s,u=i+Math.sin(l)*s,t.lineTo(d,u),l+=c;t.lineTo(e,i-a),t.closePath(),t.lineWidth=r,t.strokeStyle=o,t.stroke(),t.fillStyle=h,t.fill()}}class r{constructor(t=20,e=30,i=100,n=50){this.length=t,this.amplitude=e,this.period=i,this.shading=n}}class o extends s{constructor(t,e,i,s=0,o="yellow",h="darkred",l=2){super(t,e,i),this.heightOriginal=s,this.height=this.heightOriginal,this.borderWidth=l,this.colorFill=o,this.colorStroke=h,this.aspectRatio,this.kind=(new n).kind.rectangle,this.parmWave=new r,this.isDragAndDrop=!1,this.startMove=new a(0,0),this.currentMove=new a(0,0),this.currentPoint=new a(0,0),this.setAspectRatio()}toString(){return`${this.serialNumber}. ${n.getName(this.kind)} ${Math.round(this.x)}x${Math.round(this.y)} w${Math.round(this.width)}/h${Math.round(this.height)}.`}restoreHeight(){this.height=this.heightOriginal}setOriginal(){this.widthOriginal=this.width,this.heightOriginal=this.height}setAspectRatio(){0===this.height?this.aspectRatio=NaN:this.aspectRatio=this.width/this.height}clear(t){t.clearRect(this.x,this.y,this.width,this.height)}draw(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.colorStroke,t.fill(),t.beginPath(),t.rect(this.x+this.borderWidth,this.y+this.borderWidth,this.width-2*this.borderWidth,this.height-2*this.borderWidth),t.fillStyle=this.colorFill,t.fill(),this.contextKind=t.getImageData(this.x,this.y,this.width,this.height),this.contextData=this.contextKind.data}wave(t){if(this.isAnimate){let e=t.getImageData(this.x,this.y,this.width,this.height),i=e.data,n=new Date/this.parmWave.period;for(let t=0;t<this.height;++t){let e=0,a=0;for(let s=0;s<this.width;++s){let r=4*(t*this.width+s),o=Math.sin(s/this.parmWave.length-n)*this.parmWave.amplitude*s/this.width,h=4*((t+o<<0)*this.width+s);a=(o-e)*this.parmWave.shading,i[r]=this.contextData[h]+a,i[r+1]=this.contextData[h+1]+a,i[r+2]=this.contextData[h+2]+a,i[r+3]=this.contextData[h+3],e=o}}t.putImageData(e,this.x,this.y),requestFrame(()=>this.wave(t))}}mouseDownHandler(t){this.startMove.x=this.getCoords(t).x,this.startMove.y=this.getCoords(t).y,this.isSelected&&this.startMove.x>=this.x&&this.startMove.x<=this.x+this.width&&this.startMove.y>=this.y&&this.startMove.y<=this.y+this.height&&(this.isDragAndDrop=!0)}mouseUpHandler(){this.isDragAndDrop&&(this.isDragAndDrop=!1,this.x=this.currentPoint.x,this.y=this.currentPoint.y,gt(),rt())}mouseMoveHandler(t){this.isDragAndDrop&&(this.currentMove.x=this.getCoords(t).x,this.currentMove.y=this.getCoords(t).y,gt(),this.currentPoint=new a(this.x+(this.currentMove.x-this.startMove.x),this.y+(this.currentMove.y-this.startMove.y)),this instanceof h?this.transform(this.grayscale,180,this.currentPoint):this.moveTemplate(this.currentPoint))}transform(t,e,i){let n=this.canvas.getContext("2d").getImageData(this.x,this.y,this.width,this.height),a=n.data,s=[],r=a.length;for(var o=0;o<r;o+=4)s=t.call(this,this.contextData[o],this.contextData[o+1],this.contextData[o+2],this.contextData[o+3],e,o),a[o]=s[0],a[o+1]=s[1],a[o+2]=s[2],a[o+3]=s[3];this.canvas.getContext("2d").putImageData(n,i.x,i.y)}grayscale(t,e,i,n,a){var s=.3*t+.59*e+.11*i;return[s,s,s,a]}moveTemplate(t){this.canvas.getContext("2d").beginPath(),this.canvas.getContext("2d").rect(t.x,t.y,this.width,this.height),this.canvas.getContext("2d").fillStyle="gray",this.canvas.getContext("2d").fill();let e=this.canvas.getContext("2d").createLinearGradient(t.x+this.borderWidth,t.y+this.borderWidth,t.x+this.borderWidth,t.y+this.height-2*this.borderWidth-1);e.addColorStop(0,"rgba(255, 255, 255, 0.9)"),e.addColorStop(.5,"rgba(255, 255, 255, 0.75)"),e.addColorStop(1,"rgba(255, 255, 255, 0.6)"),this.canvas.getContext("2d").fillStyle=e,this.canvas.getContext("2d").fillRect(t.x+this.borderWidth,t.y+this.borderWidth,this.width-2*this.borderWidth,this.height-2*this.borderWidth)}}class h extends o{constructor(t,e,i,a){super(t,e,i),this.country=a,this.kind=(new n).kind.flag,this.borderWidth=3,this.insideX=0,this.insideY=0,this.insideWidth=0,this.insideHeight=0}toString(){return`${this.serialNumber}. ${n.getName(this.kind)} ${(new u).getName(this.country)} ${Math.round(this.x)}x${Math.round(this.y)} w${Math.round(this.width)}/h${Math.round(this.height)}.`}}class l extends h{constructor(t,e,i){super(t,e,i,w.country.usa),this.calcStandardProportions()}calcStandardProportions(){this.height=Math.round(this.width/1.9),this.insideX=this.x+this.borderWidth,this.insideY=this.y+this.borderWidth,this.insideWidth=this.width-2*this.borderWidth,this.insideHeight=this.height-2*this.borderWidth,this.heightUnion=7*this.insideHeight/13,this.widthUnion=.76*this.insideHeight,this.hIndentUnion=.054*this.insideHeight,this.hStepUnion=.054*this.insideHeight,this.vIndentUnion=.063*this.insideHeight,this.vStepUnion=.063*this.insideHeight,this.diameterStar=.0616*this.insideHeight,this.heightStripe=this.insideHeight/13}draw(t){this.calcStandardProportions(),t.canvas.width<this.width+this.x&&(this.width=t.canvas.width-this.x,this.calcStandardProportions()),t.canvas.height<this.height+this.y&&(this.width=1.9*(t.canvas.height-this.y),this.calcStandardProportions()),t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle="rgba(169,169,169,0.8)",t.fill(),t.fillStyle="#fff",t.fillRect(this.insideX,this.insideY,this.insideWidth,this.insideHeight),t.fillStyle="#d00";for(let e=0;e<13;e+=2)t.fillRect(this.insideX,this.insideY+e*this.heightStripe,this.insideWidth,this.heightStripe);t.fillStyle="#00b",t.fillRect(this.insideX,this.insideY,this.widthUnion,this.heightUnion),t.fillStyle="#fff";for(let e=1;e<=9;++e)for(let i=1;i<=11;++i)e%2==1&&i%2==0||e%2==0&&i%2==1||s.drawStar(t,this.insideX+i*this.vStepUnion,this.insideY+e*this.hStepUnion,5,this.diameterStar/2,this.diameterStar/5,1,"white","white");this.contextKind=t.getImageData(this.x,this.y,this.width,this.height),this.contextData=this.contextKind.data}}class d extends h{constructor(t,e,i,n,a,s=2){super(t,e,i,n),this.url=a,this.aspectRatio=s,this.isLoad=!1,this.img=new Image,this.img.addEventListener("load",()=>{this.load()},!1),this.img.src=this.url,this.calcStandardProportions()}load(){this.isLoad=!0}calcStandardProportions(){this.height=Math.round(this.width/this.aspectRatio),this.insideX=this.x+this.borderWidth,this.insideY=this.y+this.borderWidth,this.insideWidth=this.width-2*this.borderWidth,this.insideHeight=this.height-2*this.borderWidth}draw(t){this.calcStandardProportions(),t.canvas.width<this.width+this.x&&(this.width=t.canvas.width-this.x,this.calcStandardProportions()),t.canvas.height<this.height+this.y&&(this.width=(t.canvas.height-this.y)*this.aspectRatio,this.calcStandardProportions()),this.isLoad&&(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle="rgba(169,169,169,0.8)",t.fill(),t.drawImage(this.img,0,0,this.img.width,this.img.height,this.insideX,this.insideY,this.insideWidth,this.insideHeight),this.contextKind=t.getImageData(this.x,this.y,this.width,this.height),this.contextData=this.contextKind.data),this.isLoad||requestFrame(()=>this.draw(t))}}class u{constructor(){this.country={any:0,belarus:1,germany:2,hungary:3,kazakhstan:4,poland:5,russia:6,ukraine:7,unitedKingdom:8,usa:9}}getName(t){switch(t){case this.country.any:return"any country";case this.country.belarus:return"Belarus";case this.country.germany:return"Germany";case this.country.hungary:return"Hungary";case this.country.kazakhstan:return"Kazakhstan";case this.country.poland:return"Poland";case this.country.russia:return"Russia";case this.country.ukraine:return"Ukraine";case this.country.unitedKingdom:return"United Kingdom";case this.country.usa:return"USA";default:return"unknown country"}}}let c=!1,g=!1,m={length:0,amplitude:0,period:0,shading:0},f={length:0,height:0},p=!1,v=t=>document.getElementById(t);v("canvas").width=v("boxCanvas").scrollWidth,v("canvas").height=v("boxCanvas").scrollHeight;let w=new u,F=new class{constructor(){this.mapColors=new Map([["Aliceblue","#f0f8ff"],["Antiquewhite","#FAEBD7"],["Aqua","#00FFFF"],["Aquamarine","#7FFFD4"],["Azure","#F0FFFF"],["Beige","#F5F5DC"],["Bisque","#FFE4C4"],["Black","#000000"],["Blanchedalmond","#FFEBCD"],["Blue","#0000ff"],["Blueviolet","#8A2BE2"],["Brown","#A52A2A"],["Burlywood","#DEB887"],["Cadetblue","#5F9EA0"],["Chartreuse","#7FFF00"],["Chocolate","#D2691E"],["Coral","#FF7F50"],["Cornflowerblue","#6495ED"],["Cornsilk","#FFF8DC"],["Crimson","#DC143C"],["Cyan","#00FFFF"],["Darkblue","#00008B"],["Darkcyan","#008B8B"],["Darkgoldenrod","#B8860B"],["Darkgray","#A9A9A9"],["Darkgreen","#006400"],["Darkkhaki","#BDB76B"],["Darkmagenta","#8B008B"],["Darkolivegreen","#556B2F"],["Darkorange","#FF8C00"],["Darkorchid","#9932CC"],["Darkred","#8B0000"],["Darksalmon","#E9967A"],["Darkseagreen","#8FBC8B"],["Darkslateblue","#483D8B"],["Darkslategray","#2F4F4F"],["Darkturquoise","#00CED1"],["Darkviolet","#9400D3"],["Deeppink","#FF1493"],["Deepskyblue","#00BFFF"],["Dimgray","#696969"],["Dodgerblue","#1E90FF"],["Firebrick","#B22222"],["Floralwhite","#FFFAF0"],["Forestgreen","#228B22"],["Fuchsia","#FF00FF"],["Gainsboro","#DCDCDC"],["Ghostwhite","#F8F8FF"],["Gold","#FFD700"],["Goldenrod","#DAA520"],["Gray","#808080"],["Green","#008000"],["Greenyellow","#ADFF2F"],["Honeydew","#F0FFF0"],["Hotpink","#FF69B4"],["Indianred","#CD5C5C"],["Indigo","#4B0082"],["Ivory","#FFFFF0"],["Khaki","#F0E68C"],["Lavender","#E6E6FA"],["Lavenderblush","#FFF0F5"],["Lawngreen","#7CFC00"],["Lemonchiffon","#FFFACD"],["Lightblue","#ADD8E6"],["Lightcoral","#F08080"],["Lightcyan","#E0FFFF"],["Lightgoldenrod","#EEDD82"],["Lightgoldenrodyellow","#FAFAD2"],["Lightgray","#D3D3D3"],["Lightgreen","#90EE90"],["Lightpink","#FFB6C1"],["Lightsalmon","#FFA07A"],["Lightseagreen","#20B2AA"],["Lightskyblue","#87CEFA"],["Lightslateblue","#8470FF"],["Lightslategray","#778899"],["Lightsteelblue","#B0C4DE"],["Lightyellow","#FFFFE0"],["Lime","#00FF00"],["Limegreen","#32CD32"],["Linen","#FAF0E6"],["Magenta","#FF00FF"],["Maroon","#800000"],["Mediumaquamarine","#66CDAA"],["Mediumblue","#0000CD"],["Mediumorchid","#BA55D3"],["Mediumpurple","#9370DB"],["Mediumseagreen","#3CB371"],["Mediumslateblue","#7B68EE"],["Mediumspringgreen","#00FA9A"],["Mediumturquoise","#48D1CC"],["Mediumvioletred","#C71585"],["Midnightblue","#191970"],["Mintcream","#F5FFFA"],["Mistyrose","#FFE4E1"],["Moccasin","#FFE4B5"],["Navajowhite","#FFDEAD"],["Navy","#000080"],["Navyblue","#A0B0E0"],["Oldlace","#FDF5E6"],["Olive","#808000"],["Olivedrab","#6B8E23"],["Orange","#FFA500"],["Orangered","#FF4500"],["Orchid","#DA70D6"],["Palegoldenrod","#EEE8AA"],["Palegreen","#98FB98"],["Paleturquoise","#AFEEEE"],["Palevioletred","#DB7093"],["Papayawhip","#FFEFD5"],["Peachpuff","#FFDAB9"],["Peru","#CD853F"],["Pink","#FFC0CB"],["Plum","#DDA0DD"],["Powderblue","#B0E0E6"],["Purple","#800080"],["Red","#FF0000"],["Rosybrown","#BC8F8F"],["Royalblue","#4169E1"],["Saddlebrown","#8B4513"],["Salmon","#FA8072"],["Sandybrown","#F4A460"],["Seagreen","#2E8B57"],["Seashell","#FFF5EE"],["Sienna","#A0522D"],["Silver","#C0C0C0"],["Skyblue","#87CEEB"],["Slateblue","#6A5ACD"],["Slategray","#708090"],["Snow","#FFFAFA"],["Springgreen","#00FF7F"],["Steelblue","#4682B4"],["Tan","#D2B48C"],["Teal","#008080"],["Thistle","#D8BFD8"],["Tomato","#FF6347"],["Turquoise","#40E0D0"],["Violet","#EE82EE"],["Violetred","#D02090"],["Wheat","#F5DEB3"],["White","#FFFFFF"],["Whitesmoke","#F5F5F5"],["Yellow","#FFFF00"],["Yellowgreen","#9ACD32"]])}setFillLineGradient(t,e){let i,n=0===Number(e.value)?F.getRandomInt(1,4):Number(e.value);i=this.getLinerGradient(n,t,0,0,t.canvas.width,t.canvas.height),this.setLinerGradient(i,3,10),t.fillStyle=i,t.fillRect(0,0,t.canvas.width,t.canvas.height)}getFillBoxLineGradient(t,e,i,n,a){let s,r=F.getRandomInt(1,4);return a.typeGradient=r,s=this.getLinerGradient(r,t,e,i,n,n),a.listColors=this.setLinerGradient(s,3,10),s}restoreFillBoxLineGradient(t,e,i,n,a){let s;s=this.getLinerGradient(a.typeGradient,t,e,i,n,n);for(let t of a.listColors)s.addColorStop(t.position,t.color);return s}getLinerGradient(t,e,i,n,a,s){return 1===t?e.createLinearGradient(i,n,i,n+s):2===t?e.createLinearGradient(i,n,i+a,n):3===t?e.createLinearGradient(i,n,i+s,n+a):4===t?e.createLinearGradient(i,n+a,i+s,0):e.createLinearGradient(i,n,i,n+s)}setLinerGradient(t,e,i){let n,a=new Array,s=this.getRandomInt(e,i);for(let e=0;e<s;e++)n=new ColorsStop(e/s,this.getRandomColor()),a.push(n),t.addColorStop(n.position,n.color);return n=new ColorsStop(1,this.getRandomColor()),a.push(n),t.addColorStop(n.position,n.color),a}getRandomColor(){let t,e=this.getRandomInt(1,this.mapColors.size),i=0;for(let n of this.mapColors.keys())if(i++,i===e){t=this.mapColors.get(n);break}return t}getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}},b=new n,y=document.createElement("canvas"),x=new Array,k=new class{constructor(){this.mousemove=new Map,this.mousedown=new Map,this.mouseup=new Map}set(t,e,i){t.set(e,i)}delete(t,e){t.delete(e)}};Q(),tt(),et(),function(){for(item of x)v("listFigures").appendChild(new Option(item,item.serialNumber))}(),ot();let D=$("#waveLength").data("roundSlider"),C=$("#waveAmplitude").data("roundSlider"),S=$("#wavePeriod").data("roundSlider"),A=$("#waveShading").data("roundSlider"),L=$("#figureWidth").data("roundSlider"),M=$("#figureHeight").data("roundSlider"),W=!1;function E(t){return"block"===t.style.display||"block"===window.getComputedStyle(t,null).display}function B(){if(p)v("btnAnimate").innerHTML=p.isAnimate?"Stop wave":"Start wave";else{let t=0,e=0;for(let i of x)i.isAnimate?t++:e++;x.length>0&&(v("btnAnimate").innerHTML=t>0&&e>0||0===t&&e>0?"Start wave":"Stop wave")}}function P(t){t.isAnimate=!0,t.wave(v("canvas").getContext("2d"))}function N(){let t=!1;for(let e of x){t=e.isAnimate;break}return t}function H(t){W="start"===t.type,R(t.value)}function R(t){if(p)p.parmWave.length=t;else{for(let e of x)e.parmWave.length=t;ht()}W&&requestFrame(()=>R(D.option("value")))}function I(t){W="start"===t.type,T(t.value)}function T(t){if(p)p.parmWave.amplitude=t;else{for(let e of x)e.parmWave.amplitude=t;ht()}W&&requestFrame(()=>T(C.option("value")))}function O(t){W="start"===t.type,G(t.value)}function G(t){if(p)p.parmWave.period=t;else{for(let e of x)e.parmWave.period=t;ht()}W&&requestFrame(()=>G(S.option("value")))}function q(t){W="start"===t.type,z(t.value)}function z(t){if(p)p.parmWave.shading=t;else{for(let e of x)e.parmWave.shading=t;ht()}W&&requestFrame(()=>z(A.option("value")))}function U(t){W="start"===t.type,function t(e){p&&(p.isAnimate&&(p.isAnimate=!1,B()),p.width=Number(e),p instanceof o&&p.setOriginal(),gt(),p instanceof h&&M.option("value",p.height),rt(),W&&requestFrame(()=>t(L.option("value"))))}(t.value)}function K(t){W="start"===t.type,function t(e){p&&(p.isAnimate&&(p.isAnimate=!1,B()),p.height=Number(e),p instanceof o&&p.setOriginal(),gt(),rt(),W&&requestFrame(()=>t(M.option("value"))))}(t.value)}function Y(){p.isSelected&&(p.isSelected=!1),p=!1,v("deselectFigure").style.display="none",j(),Q(),tt(),et(),v("listFigures").options[0].selected=!0,lt(),dt()}function X(t){p&&p.isSelected&&Y();let e=t.isAnimate;p=t,p.isSelected=!0,p.canvas=v("canvas"),p.bufferCanvas=y,function(){if(p)for(let t of v("listFigures").options)if(Number(t.value)===p.serialNumber){t.selected=!0;break}}(),v("deselectFigure").style.display="block",Q(),tt(),et(),lt(t),dt(t),e&&(p.isAnimate=!1),p.draw(v("canvas").getContext("2d")),e&&P(p)}function j(){p?(L.option("disabled")&&L.option("disabled",!1),v("lblFigureWidth").style.color="black",p instanceof h?(M.option("disabled")||M.option("disabled",!0),v("lblFigureHeight").style.color="darkgray"):(M.option("disabled")&&M.option("disabled",!1),v("lblFigureHeight").style.color="black")):(L.option("disabled")||L.option("disabled",!0),v("lblFigureWidth").style.color="darkgray",M.option("disabled")||M.option("disabled",!0),v("lblFigureHeight").style.color="darkgray")}function _(){let t=0,e=0;for(let i of x)i.isAnimate?t++:e++;return{countIsAnimate:t,countNotAnimate:e}}function V(){let t=!1;if(x.length>0){_().countIsAnimate===x.length&&(t=!0)}return t}function J(){if(p&&!p.isAnimate)p.clear(v("canvas").getContext("2d")),p.draw(v("canvas").getContext("2d"));else if(!V())for(let t of x)t.isAnimate||(t.clear(v("canvas").getContext("2d")),t.draw(v("canvas").getContext("2d")))}function Q(){let t=!1;p?p.isAnimate||(t=!0):x.length>0&&!V()&&(t=!0),t?(v("restore").addEventListener("click",J,!1),v("restore").classList.contains("background-transparent-50")&&v("restore").classList.remove("background-transparent-50"),v("restore").classList.contains("button-with-hover-blue")||v("restore").classList.add("button-with-hover-blue")):(v("restore").removeEventListener("click",J,!1),v("restore").classList.contains("button-with-hover-blue")&&v("restore").classList.remove("button-with-hover-blue"),v("restore").classList.contains("background-transparent-50")||v("restore").classList.add("background-transparent-50"))}function Z(){!p||p instanceof h||p.isAnimate||(p.colorFill=F.getRandomColor(),p.colorStroke=F.getRandomColor(),p.draw(v("canvas").getContext("2d")))}function tt(){let t=!1;!p||p instanceof h||p.isAnimate||(t=!0);let e=v("changeColorFill");t?(e.addEventListener("click",Z,!1),e.classList.contains("background-transparent-50")&&e.classList.remove("background-transparent-50"),e.classList.contains("button-with-hover-blue")||e.classList.add("button-with-hover-blue")):(e.removeEventListener("click",Z,!1),e.classList.contains("button-with-hover-blue")&&e.classList.remove("button-with-hover-blue"),e.classList.contains("background-transparent-50")||e.classList.add("background-transparent-50"))}function et(){let t=!1;p&&(p.isAnimate||(t=!0));let e=v("removeFigure");t?(e.addEventListener("click",at,!1),e.classList.contains("background-transparent-50")&&e.classList.remove("background-transparent-50"),e.classList.contains("button-with-hover-blue")||e.classList.add("button-with-hover-blue")):(e.removeEventListener("click",at,!1),e.classList.contains("button-with-hover-blue")&&e.classList.remove("button-with-hover-blue"),e.classList.contains("background-transparent-50")||e.classList.add("background-transparent-50"))}function it(){v("addPanel").style.opacity=0,setTimeout(()=>{E(v("addPanel"))&&(v("addPanel").style.display="none")},450)}function nt(){v("confirmDel").style.opacity=0,setTimeout(()=>{E(v("confirmDel"))&&(v("confirmDel").style.display="none")},450)}function at(t){if(p)if(E(v("confirmDel")))nt();else{let e=t.target.getBoundingClientRect();v("confirmDel").style.left=e.left+"px",v("confirmDel").style.top=e.bottom+5+"px",v("confirmDel").style.display="block",v("confirmDel").style.opacity=1,v("confirmAbout").innerHTML=p}}function st(t){if(t.target.dataset.country){let e=Number(t.target.dataset.country);mt(b.kind.flag,e)}else if(t.target.dataset.figure){mt(Number(t.target.dataset.figure),0)}}function rt(){if(p)for(let t of x)if(t===p){for(let e of v("listFigures").options)if(Number(e.value)===t.serialNumber){e.text=t;break}break}}function ot(){let t="+"+Math.floor(v("cellWaveLength").clientWidth/6.25),e=Math.floor(v("cellWaveLength").clientWidth/7),i=Math.floor(v("cellWaveLength").clientWidth/2);for(item of($("#waveLength").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:5,max:100,change:t=>{H(t)},start:t=>{H(t)}}),t="+"+Math.floor(v("cellWaveAmplitude").clientWidth/6.25),e=Math.floor(v("cellWaveAmplitude").clientWidth/7),i=Math.floor(v("cellWaveAmplitude").clientWidth/2),$("#waveAmplitude").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:1,max:100,change:t=>{I(t)},start:t=>{I(t)}}),t="+"+Math.floor(v("cellWavePeriod").clientWidth/6.25),e=Math.floor(v("cellWavePeriod").clientWidth/7),i=Math.floor(v("cellWavePeriod").clientWidth/2),$("#wavePeriod").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:1,max:999,change:t=>{O(t)},start:t=>{O(t)}}),t="+"+Math.floor(v("cellWaveShading").clientWidth/6.25),e=Math.floor(v("cellWaveShading").clientWidth/7),i=Math.floor(v("cellWaveShading").clientWidth/2),$("#waveShading").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:1,max:200,change:t=>{q(t)},start:t=>{q(t)}}),t="+"+Math.floor(v("cellFigureWidth").clientWidth/6.25),e=Math.floor(v("cellFigureWidth").clientWidth/7),i=Math.floor(v("cellFigureWidth").clientWidth/2),$("#figureWidth").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:20,max:700,change:t=>{U(t)},start:t=>{U(t)}}),t="+"+Math.floor(v("cellFigureHeight").clientWidth/6.25),e=Math.floor(v("cellFigureHeight").clientWidth/7),i=Math.floor(v("cellFigureHeight").clientWidth/2),$("#figureHeight").roundSlider({sliderType:"min-range",handleShape:"round",handleSize:t,width:e,radius:i,min:20,max:400,change:t=>{K(t)},start:t=>{K(t)}}),document.getElementsByClassName("rs-tooltip-text")))item.style.fontSize=Math.floor(v("cellWaveLength").clientWidth/7.5)+"px"}function ht(){m.length=D.option("value"),m.amplitude=C.option("value"),m.period=S.option("value"),m.shading=A.option("value")}function lt(t){c=!0,t?(D.option("value",t.parmWave.length),C.option("value",t.parmWave.amplitude),S.option("value",t.parmWave.period),A.option("value",t.parmWave.shading)):(D.option("value",m.length),C.option("value",m.amplitude),S.option("value",m.period),A.option("value",m.shading)),c=!1}function dt(t){g=!0,t?(L.option("value",t.width),M.option("value",t.height)):(L.option("value",f.length),M.option("value",f.height)),g=!1}function ut(){v("lblSizeCanvas").innerHTML=`Canvas: w${Math.round(v("canvas").width)} h${Math.round(v("canvas").height)}`}function ct(){y.width=v("canvas").width,y.height=v("canvas").height}function gt(){if(y.getContext("2d").clearRect(0,0,y.width,y.height),p){for(item of x)item.isSelected||item.draw(y.getContext("2d"));p.draw(y.getContext("2d"))}else for(item of x)item.draw(y.getContext("2d"));v("canvas").getContext("2d").clearRect(0,0,v("canvas").width,v("canvas").height),v("canvas").getContext("2d").drawImage(y,0,0)}function mt(t,e){let n=null,a=F.getRandomInt(100,Math.round(v("canvas").width/2)),s=F.getRandomInt(50,Math.round(v("canvas").height/4)),r=F.getRandomInt(3,Math.floor(Math.min(a,s)/7)),h=new o(F.getRandomInt(1,Math.floor(v("canvas").width)-a),F.getRandomInt(1,Math.floor(v("canvas").height)-s),a,s,F.getRandomColor(),F.getRandomColor(),r);switch(h.serialNumber=ft(),t){case b.kind.rectangle:x.push(h),v("listFigures").appendChild(new Option(h,h.serialNumber)),X(h),k.set(k.mousedown,h.serialNumber,t=>{h.mouseDownHandler(t)}),k.set(k.mousemove,h.serialNumber,t=>{h.mouseMoveHandler(t)}),k.set(k.mouseup,h.serialNumber,t=>{h.mouseUpHandler(t)}),h.draw(v("canvas").getContext("2d"));break;case b.kind.flag:switch(e){case w.country.belarus:n=new d(h.x,h.y,h.width,e,"img-figures/belarus.png");break;case w.country.germany:n=new d(h.x,h.y,h.width,e,"img-figures/germany.png",1.67);break;case w.country.hungary:n=new d(h.x,h.y,h.width,e,"img-figures/hungary.png",1.5);break;case w.country.kazakhstan:n=new d(h.x,h.y,h.width,e,"img-figures/kazakhstan.png");break;case w.country.poland:n=new d(h.x,h.y,h.width,e,"img-figures/poland.png",1.6);break;case w.country.russia:n=new d(h.x,h.y,h.width,e,"img-figures/russia.png");break;case w.country.ukraine:n=new d(h.x,h.y,h.width,e,"img-figures/ukraine.png");break;case w.country.unitedKingdom:n=new d(h.x,h.y,h.width,e,"img-figures/united-kingdom.png");break;case w.country.usa:n=new l(h.x,h.y,h.width);break;default:i=0}n&&(n.serialNumber=ft(),x.push(n),v("listFigures").appendChild(new Option(n,n.serialNumber)),X(n),k.set(k.mousedown,n.serialNumber,t=>{n.mouseDownHandler(t)}),k.set(k.mousemove,n.serialNumber,t=>{n.mouseMoveHandler(t)}),k.set(k.mouseup,n.serialNumber,t=>{n.mouseUpHandler(t)}),n.draw(v("canvas").getContext("2d")));break;default:x.push(h),v("listFigures").appendChild(new Option(h,h.serialNumber)),X(h),k.set(k.mousedown,h.serialNumber,t=>{h.mouseDownHandler(t)}),k.set(k.mousemove,h.serialNumber,t=>{h.mouseMoveHandler(t)}),k.set(k.mouseup,h.serialNumber,t=>{h.mouseUpHandler(t)}),h.draw(v("canvas").getContext("2d"))}}function ft(){let t=0;if(0===x.length)t=1;else{let e=0;for(item of x)item.serialNumber>e&&(e=item.serialNumber);t=e+1}return t}window.requestFrame=function(t){(window.mozRequestAnimationFrame||window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,100)})(t)},R(D.option("value")),T(C.option("value")),G(S.option("value")),z(A.option("value")),ht(),f.length=L.option("value"),f.height=M.option("value"),j(),ut(),ct(),v("btnAnimate").addEventListener("click",(function(t){!function(t){if("Start wave"===t.innerHTML.trim())if(t.innerHTML="Stop wave",p)p.isAnimate||P(p);else for(let t of x)P(t);else if(t.innerHTML="Start wave",p)p.isAnimate=!1;else for(let t of x)t.isAnimate=!1;Q(),tt(),et()}(t.target)}),!1),window.addEventListener("resize",()=>{let t=N();if(t)for(let e of x)e.wasAnimate=e.isAnimate,e.isAnimate=!t;v("canvas").getContext("2d").clearRect(0,0,v("canvas").width,v("canvas").height),v("canvas").width=v("boxCanvas").scrollWidth,v("canvas").height=v("boxCanvas").scrollHeight;for(let t of x)t instanceof h&&t.restoreWidth(),t.draw(v("canvas").getContext("2d"));if(t)for(let t of x)t.wasAnimate&&P(t);!function(){for(let t of x)for(let e of v("listFigures").options)if(Number(e.value)===t.serialNumber){e.text=t;break}}(),it(),nt(),ot(),ut(),ct()},!1),v("canvas").addEventListener("click",(function(t){let e,i;e=t.pageX-v("canvas").offsetLeft,i=t.pageY-v("canvas").offsetTop,console.log(e,i);for(let t of x)e>=t.x&&e<=t.x+t.width&&i>=t.y&&i<=t.y+t.height&&(p?t===p?Y():(Y(),X(t)):X(t),B(),j())}),!1),v("canvas").addEventListener("mousedown",t=>{!function(t){for(fn of k.mousedown.values())fn(t)}(t)},!1),v("canvas").addEventListener("mousemove",t=>{!function(t){for(fn of k.mousemove.values())fn(t)}(t)},!1),v("canvas").addEventListener("mouseup",t=>{!function(t){for(fn of k.mouseup.values())fn(t)}(t)},!1),v("deselectFigure").addEventListener("click",Y,!1),v("addFifure").addEventListener("click",(function(t){if(E(v("addPanel")))it();else{let e=t.target.getBoundingClientRect();v("addPanel").style.left=e.left+"px",v("addPanel").style.top=e.bottom+5+"px",v("addPanel").style.display="block",v("addPanel").style.opacity=1}}),!1),v("addPanel").addEventListener("mouseleave",it,!1),v("confirmDel").addEventListener("mouseleave",nt,!1),window.addEventListener("scroll",(function(t){it(),nt()}),!1);for(let t of document.getElementsByName("flag"))t.addEventListener("click",st,!1);for(let t of document.getElementsByName("figure"))t.addEventListener("click",st,!1);v("listFigures").addEventListener("change",(function(){let t=Number(v("listFigures").value);if(t>0){for(let e of x)if(e.serialNumber===t){X(e);break}B(),j(),Q(),tt(),et()}}),!1),v("confirmDelCancel").addEventListener("click",nt,!1),v("confirmDelOk").addEventListener("click",()=>{if(p){p.isAnimate&&(p.isAnimate=!1);let t=v("listFigures").options.selectedIndex;p instanceof o&&(k.delete(k.mouseup,p.serialNumber),k.delete(k.mousemove,p.serialNumber),k.delete(k.mousedown,p.serialNumber)),x.splice(x.indexOf(p),1),Y(),v("listFigures").options[t]=null;let e=N();if(e)for(let t of x)t.wasAnimate=t.isAnimate,t.isAnimate=!e;if(gt(),e)for(let t of x)t.wasAnimate&&P(t)}nt()},!1)}]);